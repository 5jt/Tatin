<!DOCTYPE html>
<html lang="en" style="scroll-behavior:smooth" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title>Tatin User Setting</title>
<style media="screen">
html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}body{margin:0;}article,aside,footer,header,nav,section{display:block;}h1{font-size:2em;margin:0.67em 0;}figcaption,figure,main{display:block;}figure{margin:1em 40px;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace, monospace;font-size:1em;}a{background-color:transparent;-webkit-text-decoration-skip:objects;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:inherit;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace, monospace;font-size:1em;}dfn{font-style:italic;}mark{background-color:#ff0;color:#000;}small{font-size:0.8em;}sub,sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}audio,video{display:inline-block;}audio:not([controls]){display:none;height:0;}img{border-style:none;}svg:not(:root){overflow:hidden;}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:1em;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,html [type="button"], [type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{display:inline-block;vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details, menu{display:block;}summary{display:list-item;}canvas{display:inline-block;}template{display:none;}[hidden]{display:none;}body{margin:0;font-family:"Bookman Old Style", "Callisto MT", Bookman, "Goudy Old Style", Garamond, serif;background-color:#fdfdfd;font-size:18px;line-height:1.4;max-width:900px;padding:0.83em;color:#292929;word-wrap:break-word;overflow-wrap:break-word;}h1, h2, h3, h4, h5, h6{color:#404040;font-weight:800;padding-left:0;}h1, h2, h3, h4, h5, h6{font-family:"Century Gothic", Verdana, "Sans";}h1, h2, h3, h4, p{margin-bottom:0.88em;}h1{font-size:1.8em;margin:0.27em 0 1.11em 0;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:1em;background-color:inherit;}h2{font-size:1.44em;margin:0.55em 0 0.55em 0;padding-top:0.55em;border-bottom:1px solid Silver;}h3{margin:0;margin-top:0.55em;font-size:1.22em;}nav h3{font-size:0.88em;margin-left:0.83em;margin-bottom:0.27em;}h4{font-size:1em;margin:0;margin-top:0.55em;}h5{font-size:0.94em;margin:0;margin-top:0.66em;padding:0;}h6{font-size:0.88em;margin:0;margin-top:0.66em;padding:0;}a{color:#0099ff;margin:0;padding:0;vertical-align:baseline;}a:visited{color:purple;}a.autoheader_anchor{text-decoration:none;}ul{list-style-type:disc;}ul, ol{padding:0;margin:0;}dd{padding-top:0.25em;}p.first_dd{padding-top:0.25em;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:1.38em;margin-bottom:0.55em;}ul > li{margin-left:2.5em;}ol > li{margin-left:2.5em;}li ul{margin-left:0.55em;}li ul{margin-left:0.27em;}li p{padding:1px 0 0 0;margin:0.55em 0 0.27em 0;line-height:1.3;}ul, ol{line-height:1.3;padding:0.33em 0 0 0;margin:0.5em;}p{line-height:1.2;padding:0.40em 0 0 0;margin:0;}pre{overflow:scroll;padding:0.55em 0.27em;margin:0.55em 0 0.55em 0 !important;background-color:#faebd7;color:#3e3e3e;border:1px Silver dashed;display:block;font-family:APLFont, monospace;font-weight:normal;white-space:pre-wrap;}pre > code{line-height:1.2;border:0;padding:0;margin:0;background-color:inherit;color:inherit;font-weight:inherit;white-space:pre-wrap;}td code{padding:0;}a code{padding:0;font-size:1em;}nav code{background-color:inherit;font-weight:400;color:inherit;}code{font-family:APLFont, monospace;color:Black;font-weight:800;line-height:1.2;font-size:0.88em;margin:0;color:#950000;padding:0 0.16em;}tbody tr:nth-child(even){background-color:#F0F0F0;}th{background-color:#E6E6E6;color:black;}th, td{padding:0.16em 0.55em;vertical-align:top;}table td + td{border-left:1px solid gray;}table th + th{border-left:1px solid gray;}table{border-color:Black;margin:1.5em 0;border:2px black;border-collapse:collapse;font-family:APLFont;font-size:0.88em;line-height:1.2;border:1px solid Gray;}li > table{margin:0.55em 0 0.55em 0;}tr{margin:1.11em;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:0.27em solid silver;padding-left:0.27em;margin:0.83em 0.27em 0.83em 0.55em;}blockquote ul li{margin-left:1.38em;}blockquote ol li{margin-left:1.38em;}li > blockquote{margin-left:0;}nav{background-color:#f5f5f5;border:1px solid Black;padding:0.55em;margin:0.55em;margin-right:0;box-shadow:0.27em 0.27em 0.27em Gray;overflow:hidden;clear:both;}nav#main_nav{position:fixed;top:0;right:0.55em;float:none;width:auto;}nav#main_nav_no_collapse li{font-size:0.77rem;}nav#main_nav_no_collapse li{line-height:1.5;}nav ul{list-style-type:none;margin:0 0 0.11em 0;padding:0;}nav a:visited{color:black;}nav ul li{margin-bottom:0.16em;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:0.75rem;line-height:1.3;padding:0;margin-top:0;margin-bottom:0;margin-left:0.83em;}nav p{font-weight:bold;font-size:0.75rem;padding-top:0;}dl{margin-top:0.1em;margin-bottom:0.1em;}dt{margin-top:0.75em;margin-bottom:0.1em;font-weight:800;}label#hide_toc_label{font-size:0.8em;}.toc-container{position:relative;height:auto;}div.toc-container h1{font-size:0.88em;margin:0.27em 0 0.27em 0;}[type="checkbox"]{position:absolute;left:-9999px;}label{display:block;width:100%;height:1.1em;cursor:pointer;top:0;padding-left:1.1em;}label:before{content:'Table of contents \25BC';font-weight:bold;font-size:90%;padding-bottom:0;}[type="checkbox"] ~ div{display:none;}[type="checkbox"]:checked ~ div{display:block;margin-top:1.1em;}[type="checkbox"]:checked + label{top:100%;}[type="checkbox"]:checked + label:before{content:'Table of contents ▲';}div#footnotes_div p{line-height:1;padding-bottom:0;padding-top:0;}div#footnotes_div ol{padding-top:0;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("https://misc.aplteam.com/apl385.ttf") format("truetype");}.no_display{display:none;}.red{color:red;}.center{text-align:center;margin-left:auto;margin-right:auto;}.left{text-align:left;margin-right:0 auto;}.right{text-align:right;margin-left:0 auto;}img{margin-top:0.55em;margin-bottom:0.27em;}div.leanpub{padding:0.83em 0.55em 1.11em 0;margin:0.55em 0 0 0.27em;overflow:auto;}div.leanpub_A{border:1px solid black;background-color:#f1f1f1;padding:0.55em;margin:1.11em 0 0.83em 0;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:0.27em 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 1.11em 0.27em 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub img{float:left;padding:0;margin:0.55em 1.11em 0 0;clear:both;}div.leanpub tbody *{background-color:transparent;}div.leanpub p{padding:0.17em 0 0 0;margin:0;}span.leanpub_code{color:Red;}div.leanpub p{display:block;padding:0.44em 0 0 0;}div.leanpub > div{margin-left:2.27em;}.print_only{display:none;}
</style>
<style media="print">
@page{margin:25mm 20mm 25mm 20mm;}body{font-family:"Bookman Old Style", "Callisto MT", Bookman,"Goudy Old Style", Garamond, serif;font-size:9pt;line-height:1.2;}h1{font-size:170%;}h2{font-size:110%;}h3{font-size:110%;}h4{font-size:105%;}h5{font-size:100%;}h6{font-size:95%;}h1{margin:0 0 20pt 0;}h2{margin:15pt 0 3pt 0;}h3{margin:10pt 0 0pt 0;}h4{margin:10pt 0 0pt 0;}h5{margin:9pt 0 0pt 0;}h6{margin:9pt 0 0pt 0;}h1, h2, h3, h4, h5, h6{color:black;font-family:"Century Gothic", Verdana, "Sans";page-break-after:avoid;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:100%;}h2{border-bottom:1pt solid Silver;padding-bottom:2pt;}.h_tag{page-break-after:avoid;break-after:avoid;}abbr[title]{border-bottom:0;text-decoration:none;}a{color:black;margin:0;padding:0;vertical-align:baseline;text-decoration:none;font-style:italic;}a.autoheader_anchor{text-decoration:none;font-style:normal;page-break-after:avoid;break-after:avoid;}ul{list-style-type:square;}ul, ol{padding:0;margin:0;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:13pt;margin-bottom:5pt;}ul > li{margin-left:25pt;}ol > li{margin-left:25pt;}li ul{margin-left:5pt;}li ul{margin-left:3pt;}li p{padding:1pt 0 0 0;margin:5pt 0 3pt 0;line-height:1.3;}p, ul, ol{line-height:1.3;padding:4pt 0 0 0;margin:0;color:black;}ul, ol{margin-top:0.75em;}pre{padding:3pt;margin:5pt 0;white-space:pre-wrap;background-color:#FAFAFA;border:1pt Silver solid;display:block;font-family:APLFont, monospace;page-break-inside:avoid;}pre code{background-color:#FAFAFA;color:Black;padding:0;margin:0 0 -6pt 0;line-height:1.1;border:0;white-space:pre-wrap;}code{font-family:APLFont, monospace;line-height:1.2;font-size:9pt;padding:3pt 1pt 3pt 1pt;color:#950000;padding:3pt 4pt 3pt 4pt;}tbody th, tfoot tr{background-color:#e6e6e6;}tbody tr:nth-child(even){background-color:#fafafa;}th{background-color:#F0F0F0;}th, td{padding:1pt 5pt;border:1px solid #E3E3E3;vertical-align:top;}table td + td{border-left:1px solid gray;}table th + th{border-left:1px solid gray;}table code{font-style:normal;padding-left:0;padding-right:0;}table{margin:1.5em 0;font-family:APLFont;font-size:9pt;padding:0;border:1pt solid silver;border-collapse:collapse;}li > table{margin:10pt 0 10pt 0;}tr{margin:20pt;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:5pt solid silver;padding-left:5pt;margin:8pt 3pt 8pt 8pt;}nav{background-color:#f8f8f8;border:1pt solid Gray;width:auto;float:right;padding:5pt 5pt 5pt 0;margin:5pt 0 5pt 5pt;page-break-inside:avoid;break-inside:avoid;clear:both;overflow:hidden;}nav *{font-size:75%;}nav ul{list-style-type:none;margin:0 0 2pt 0;padding:0;}nav ul li{margin-bottom:0;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:9pt;line-height:1;padding:0;margin-top:0;margin-bottom:0;margin-left:8pt;}dl{margin-top:0;margin-bottom:10pt;}dt{margin-top:10pt;margin-bottom:0;font-weight:800;page-break-inside:avoid;}dd{margin-top:2pt;}label#hide_toc_label{font-size:65%;}.toc-container{position:relative;height:auto;margin-top:2pt;background-color:inherit;}.toc-container h3{margin:0 0 2pt 7pt;}[type="checkbox"]{display:none;}label{display:block;width:100%;height:1.1em;top:0;padding-left:10pt;}label:before{content:'Table of contents';font-weight:bold;font-size:140%;padding-bottom:10pt;}a.external_link::before{content:" 🌎";}a.bookmark_link::before{content:" ➯";}a.mailto_link::before{content:" ✉"}nav a.bookmark_link{font-style:normal;}nav p{margin-left:10pt;font-weight:bold;font-size:9pt;}nav a{font-style:normal;}nav a.bookmark_link::before{content:"";}div#footnotes_div a::before{content:"";}div#footnotes_div a{font-style:normal;}div#footnotes_div{page-break-inside:avoid;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("https://misc.aplteam.com/apl385.ttf") format("truetype");}.no_print{display:none;}.red{color:red;}.center{text-align:center;margin:0 auto;}.left{text-align:left;margin-right:0 auto;}.right{text-align:right;margin-left:0 auto;}.avoid_page_break{page-break-inside:avoid;}.page_break_before{page-break-before:always;}div.leanpub{margin:10pt 0 10pt 8pt;page-break-inside:avoid;}div.leanpub_A{border:1pt solid black;background-color:#f9f9f9;padding:5pt;margin:10pt 0 10pt 0;page-break-inside:avoid;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:3pt 0 0 0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:3pt 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 10pt 2pt 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub > div > h1:first-child{padding-top:5pt;}div.leanpub img{float:left;padding:0;margin:5pt 10pt 0 0;clear:both;}div.leanpub p{padding:3pt 0 0 0;margin:0;}span.leanpub_code{font-weight:bold;}div.leanpub p{display:block;padding:8pt 0 0 0;}div.leanpub > div{margin-left:35pt;}sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;top:-0.4em;}
</style>

</head>
<body>
<nav id="main_nav">
<input type="checkbox" id="hide_toc">
<label id="hide_toc_label" for="hide_toc"></label>
<div class="toc-container">
<ul>
<li><a href="#Introduction">Introduction</a>
<ul>
<li><a href="#The-default-file">The default file</a></li>
<li><a href="#Where-does-it-live">Where does it live?</a></li>
<li><a href="#Whats-the-name-of-that-file">What's the name of that file?</a></li>
<li><a href="#May-I-edit-it">May I edit it?</a></li>
<li><a href="#What-does-Tatin-do-with-the-file">What does Tatin do with the file?</a></li>
<li><a href="#Summary">Summary</a></li>
</ul></li>
<li><a href="#Adding-and-removing-Registries">Adding and removing Registries</a>
<ul>
<li><a href="#What-have-we-got">What have we got?</a>
<ul>
<li><a href="#Create-an-instance-of-the-DefineRegistry-class">Create an instance of the <code>DefineRegistry</code> class.</a></li>
<li><a href="#Adding-the-Registry">Adding the Registry</a></li>
<li><a href="#Adding-the-Tatin-Test-Registry">Adding the Tatin Test Registry</a></li>
</ul></li>
</ul></li>
<li><a href="#Putting-the-user-config-file-elsewhere">Putting the user config file elsewhere</a>
<ul>
<li><a href="#Make-the-switch-permanent">Make the switch permanent</a>
</li></ul></li>
</ul>
</div>
</nav>
<div class="h_tag">
<a href="#Tatin-User-Settings" id="Tatin-User-Settings" class="autoheader_anchor">
<h1 data-id="Tatin-User-Settings">Tatin User Settings</h1>
</a>
</div>
<div class="h_tag">
<a href="#Introduction" id="Introduction" class="autoheader_anchor">
<h2 data-id="Introduction">Introduction</h2>
</a>
</div>
<p>Tatin uses a file to remember all Tatin Registries you want to work with, and possibly other user-specific settings as well. We refer to this file as the user settings file.</p>
<p>When you start using Tatin for the very first time with 18.0 (when Tatin is not part of a standard installation of Dyalog APL) there is no such file, and therefore Tatin will create one in a specific location.</p>
<div class="h_tag">
<a href="#The-default-file" id="The-default-file" class="autoheader_anchor">
<h3 data-id="The-default-file">The default file</h3>
</a>
</div>
<p>That default file will only have one Tatin Registry defined in it: the principal Tatin server, available under the address <code>https://tatin.dev/</code>. It has an alias <code>tatin</code> assigned to it, so you can address it as <code>[tatin]</code> with all user commands that require a Registry as parameter.</p>
<div class="h_tag">
<a href="#Where-does-it-live" id="Where-does-it-live" class="autoheader_anchor">
<h3 data-id="Where-does-it-live">Where does it live?</h3>
</a>
</div>
<p>This default file will be created in the user's home folder; the API function <code>⎕SE.Tatin.GetUserHomeFolder''</code> does return that folder.</p>
<div class="h_tag">
<a href="#Whats-the-name-of-that-file" id="Whats-the-name-of-that-file" class="autoheader_anchor">
<h3 data-id="Whats-the-name-of-that-file">What's the name of that file?</h3>
</a>
</div>
<p>The name of the file is <code>tatin-client.json</code>.</p>
<div class="h_tag">
<a href="#May-I-edit-it" id="May-I-edit-it" class="autoheader_anchor">
<h3 data-id="May-I-edit-it">May I edit it?</h3>
</a>
</div>
<p>Of course you are free to edit that file with any editor. However, if you are not familiar with <a href="https://json5.org/" class="external_link">JSON5</a> then keep in mind that you are in charge for making sure that the contents of the file is valid JSON5: if it's not, Tatin will crash.</p>
<p>Changing the contents of that file by other means — discussed next — is much saver as it would check your input and also make sure that the contents of the file is always valid (syntactically correct).</p>
<div class="h_tag">
<a href="#What-does-Tatin-do-with-the-file" id="What-does-Tatin-do-with-the-file" class="autoheader_anchor">
<h3 data-id="What-does-Tatin-do-with-the-file">What does Tatin do with the file?</h3>
</a>
</div>
<p>When Tatin is initialized (that is discussed in detail in the document “InitializingTatin”) in creates an instance of the <code>UserSettings</code> class with the name <code>MyUserSettings</code> which lives in <code>⎕se.Tatin</code>.</p>
<p>The constructor gets the fully qualified name of the user config file as an argument and is therefore able to represent that file. If it does not exist yet it is created.</p>
<div class="h_tag">
<a href="#Summary" id="Summary" class="autoheader_anchor">
<h3 data-id="Summary">Summary</h3>
</a>
</div>
<p>In most scenarios you will probably be happy with having just one user settings file for Tatin, and having it in its default location.</p>
<p>You may however want to have your own Tatin Registries, for example for private projects.</p>
<div class="h_tag">
<a href="#Adding-and-removing-Registries" id="Adding-and-removing-Registries" class="autoheader_anchor">
<h2 data-id="Adding-and-removing-Registries">Adding and removing Registries</h2>
</a>
</div>
<p>You can manipulate the <code>MyUserSettings</code> instance via its methods.</p>
<p>We are now going to add a registry, list all registries and then delete that registry, getting us back to where we started from.</p>
<div class="h_tag">
<a href="#What-have-we-got" id="What-have-we-got" class="autoheader_anchor">
<h3 data-id="What-have-we-got">What have we got?</h3>
</a>
</div>
<p>Let's list all registries currently defined:</p>
<pre><code>      ⎕se.Tatin.MyUserSettings.ListRegistries ⍬
 Alias  URI                 Port  Priority  API-key
 -----  ------------------  ----  --------  -------
 tatin  https://tatin.dev/     0       100</code></pre>
<p>This is because originally Tatin only knows about the principal Tatin server.</p>
<p>Let's add a made-up registry.</p>
<div class="h_tag">
<a href="#Create-an-instance-of-the-DefineRegistry-class" id="Create-an-instance-of-the-DefineRegistry-class" class="autoheader_anchor">
<h4 data-id="Create-an-instance-of-the-DefineRegistry-class">Create an instance of the <code>DefineRegistry</code> class.</h4>
</a>
</div>
<p>Let's assume that you work for a company “MyCompany”, and that this company entertains a Tatin Server under the address https://tatin.mycompany.com.</p>
<p>In order to add that Registry to the user settings file you must first instantiate the <code>DefineRegistry</code> class. You may specify the URL and the alias in different ways, execute <code>]adoc ⎕se.Tatin.DefineRegistry</code> for details on that class.</p>
<p>We will pass a simple text vector that specifies the alias (between <code>[]</code>) and the URI:</p>
<pre><code>      #.myReg←⎕NEW ⎕SE.Tatin.DefineRegistry (,⊂'[myc]https://tatin.mycompany.com')
      #.myReg.varsList
 uri  alias  port  api_key  priority
      ]box on
      {⍵,⍪#.myReg.(⍎¨⍵)}'uri' 'alias' 'port' 'api_key' 'priority'
┌────────┬────────────────────────────┐
│uri     │https://tatin.mycompany.com/│
├────────┼────────────────────────────┤
│alias   │myc                         │
├────────┼────────────────────────────┤
│port    │0                           │
├────────┼────────────────────────────┤
│api_key │                            │
├────────┼────────────────────────────┤
│priority│0                           │
└────────┴────────────────────────────┘
      ]box off</code></pre>
<p>Notes:</p>
<ul>
<li><code>uri</code> and <code>alias</code> are already set by the constructor</li>
<li><code>port</code> is 0 which means that it will fall back to 80 for <code>http://</code> and 443 for <code>https://</code></li>
<li><code>priority</code> may be useful for defining the sequence in which Registries are scanned in case no Registry was provided. The Registry with the highest number is scanned first, and the first hits wins.</li>
<li><code>api_key</code> must be set only when the Registry is managed by a Tatin server <em>and</em> you want to publish packages.</li>
</ul>
<div class="h_tag">
<a href="#Adding-the-Registry" id="Adding-the-Registry" class="autoheader_anchor">
<h4 data-id="Adding-the-Registry">Adding the Registry</h4>
</a>
</div>
<p>Adding a registry is achieved by calling the <code>AddRegistry</code> method and providing an instance of the <code>DefineRegistry</code> class as argument:</p>
<pre><code>      ⎕se.Tatin.MyUserSettings.AddRegistry #.myReg</code></pre>
<p>Now we would expect two Registries:</p>
<pre><code>      ↑⎕se.Tatin.MyUserSettings.registries.(alias uri priority)
 tatin  https://tatin.dev/            100
 myc    https://tatin.mycompany.com/   90</code></pre>
<p>Note that the priority is not 0 anymore but 90: Any 0 is replaced by the lowest number yet minus 10. <code>priority</code> is used to determine the sequence in which the Registries are scanned in case the user asks for a specific package without specifying any registry at all.</p>
<div class="h_tag">
<a href="#Adding-the-Tatin-Test-Registry" id="Adding-the-Tatin-Test-Registry" class="autoheader_anchor">
<h4 data-id="Adding-the-Tatin-Test-Registry">Adding the Tatin Test Registry</h4>
</a>
</div>
<p><em>Don't</em> add it permanently!</p>
<p>The simple reason is that under certain circumstances Tatin scans all Registries in order to find a package, and usually you don't want to include the Test Registry in such a scan.</p>
<div class="h_tag">
<a href="#Putting-the-user-config-file-elsewhere" id="Putting-the-user-config-file-elsewhere" class="autoheader_anchor">
<h2 data-id="Putting-the-user-config-file-elsewhere">Putting the user config file elsewhere</h2>
</a>
</div>
<p>There might be scenarios when the default location for the user config file is not suitable for you.</p>
<ul>
<li>If you cannot save the Tatin user settings file in its default location due to, say,  company constraints, then of course it need to go elsewhere.</li>
<li>If you have a roaming profile, and you use different computers but expect the same environment no matter which PC you are actually using.</li>
<li>Your computer is used by several people, and they all (or at least two of them) need access to the Tatin user settings file.
<p>You could still use the default location, but because that location is user specific, every user would have its own user settings file, which is something you might or might not want to avoid.</p></li>
</ul>
<p>In any of the aforementioned cases you need more freedom than what is provided by default.</p>
<p>For that you must create a user settings file in a specific location. In order to achieve that we re-instantiate the class <code>UserConfig</code>, and we provide a path to the folder where the file should live:</p>
<pre><code>      ⎕SE.Tatin.MyUserSettings←⎕NEW ⎕SE.Tatin.UserSettings (,⊂'/path/to/user_config_file/')
      ⍴⎕←⎕se.Tatin.ListRegistries ⍬
 https://tatin.dev  tatin
1 2
      ⍴⎕←⎕se.Tatin.MyUserSettings.ListRegistries⍬
 Alias  URI                 Port  Priority  API-key
 -----  ------------------  ----  --------  -------
 tatin  https://tatin.dev/     0       100
3 5</code></pre>
<p>Notes:</p>
<ul>
<li>We use the same name as before (<code>MyUserSettings</code>) because all Tatin user commands as well as all Tatin API functions assume the existence of an instance of the class <code>UserSettings</code> with that name.</li>
<li>There are two ways to list the registries: the first one provides just the alias and the uri while the second one provides <em>all</em> data.</li>
<li>When you fire up a new session of Dyalog APL right  now, it would still look for the user settings file in its standard location.</li>
</ul>
<div class="h_tag">
<a href="#Make-the-switch-permanent" id="Make-the-switch-permanent" class="autoheader_anchor">
<h3 data-id="Make-the-switch-permanent">Make the switch permanent</h3>
</a>
</div>
<p>In order to make the switch permanent you need to set the <code>permanent</code> flag to 1:</p>
<pre><code>      ⎕SE.Tatin.MyUserSttings.permanent←1</code></pre>
<p>From now on this user settings file will be used.</p>
<div class="leanpub_A">
<h3>How is a user settings file made permanent?</h3>
<p>When in need for a user settings file, Tatin checks its own home folder — which is returned by <code>⎕SE.Tatin.GetUserHomeFolder''</code> — and looks for a file <code>.tatin</code>. If that file does not exist or is empty, it carries on with the default.</p>
<p>If it does exist it is expected to contain a path pointing to a folder that hosts a user settings file.</p>
<p>This implies that you can go back to the default by deleting the <code>.tatin</code> file, or by removing its contents.</p>
</div>

<p>You could also specify the permanent flag already when instantiating the class <code>UserSettings</code>:</p>
<pre><code>      path←'/path/to/user_config_file/'
      ⎕SE.Tatin.MyUserSttings←⎕new ⎕se.Tatin.UserSettings path  1</code></pre>
<p>Note the 1 at the end: this defines <code>permanent</code>. This tells the <code>UserSettings</code> class that from now on this user settings file shall be used whenever a new instance of Dyalog is started.</p>
<p>Note that this also allows easy switching between several user settings files by simply adjusting the contents of the <code>.tatin</code> file.</p>
</body>
</html>
