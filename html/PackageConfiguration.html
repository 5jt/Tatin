<!DOCTYPE html>
<html lang="en" style="scroll-behavior:smooth" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title>Tatin's Package Configuration</title>
<style media="screen">
html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}body{margin:0;}article,aside,footer,header,nav,section{display:block;}h1{font-size:2em;margin:0.67em 0;}figcaption,figure,main{display:block;}figure{margin:1em 40px;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace, monospace;font-size:1em;}a{background-color:transparent;-webkit-text-decoration-skip:objects;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:inherit;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace, monospace;font-size:1em;}dfn{font-style:italic;}mark{background-color:#ff0;color:#000;}small{font-size:0.8em;}sub,sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}audio,video{display:inline-block;}audio:not([controls]){display:none;height:0;}img{border-style:none;}svg:not(:root){overflow:hidden;}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:1em;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,html [type="button"], [type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{display:inline-block;vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details, menu{display:block;}summary{display:list-item;}canvas{display:inline-block;}template{display:none;}[hidden]{display:none;}body{margin:0;font-family:"Bookman Old Style", "Callisto MT", Bookman, "Goudy Old Style", Garamond, serif;background-color:#fdfdfd;font-size:18px;line-height:1.4;max-width:900px;padding:0.83em;color:#292929;word-wrap:break-word;overflow-wrap:break-word;}h1, h2, h3, h4, h5, h6{color:#404040;font-weight:800;padding-left:0;}h1, h2, h3, h4, h5, h6{font-family:"Century Gothic", Verdana, "Sans";}h1, h2, h3, h4, p{margin-bottom:0.88em;}h1{font-size:1.8em;margin:0.27em 0 1.11em 0;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:1em;background-color:inherit;}h2{font-size:1.44em;margin:0.55em 0 0.55em 0;padding-top:0.55em;border-bottom:1px solid Silver;}h3{margin:0;margin-top:0.55em;font-size:1.22em;}nav h3{font-size:0.88em;margin-left:0.83em;margin-bottom:0.27em;}h4{font-size:1em;margin:0;margin-top:0.55em;}h5{font-size:0.94em;margin:0;margin-top:0.66em;padding:0;}h6{font-size:0.88em;margin:0;margin-top:0.66em;padding:0;}a{color:#0099ff;margin:0;padding:0;vertical-align:baseline;}a:visited{color:purple;}a.autoheader_anchor{text-decoration:none;}ul{list-style-type:disc;}dd{padding-top:0.25em;}p.first_dd{padding-top:0.25em;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:1.38em;margin-bottom:0.55em;}ul > li{margin-left:2.5em;}ol > li{margin-left:2.5em;}li ul{margin-left:0.55em;}li ul{margin-left:0.27em;}li p{padding:1px 0 0 0;margin:0.55em 0 0.27em 0;line-height:1.3;}ul, ol{line-height:1.3;padding:0.33em 0 0 0;margin:0.5em;margin-top:1.2em;}p{line-height:1.2;padding:0.40em 0 0 0;margin:0;}pre{overflow:scroll;padding:0.55em 0.27em;margin:0.55em 0 0.55em 0 !important;background-color:#faebd7;color:#3e3e3e;border:1px Silver dashed;display:block;font-family:APLFont, monospace;font-weight:normal;white-space:pre-wrap;}pre > code{line-height:1.2;border:0;padding:0;margin:0;background-color:inherit;color:inherit;font-weight:inherit;white-space:pre-wrap;}td code{padding:0;}a code{padding:0;font-size:1em;}nav code{background-color:inherit;font-weight:400;color:inherit;}code{font-family:APLFont, monospace;color:Black;font-weight:800;line-height:1.2;font-size:0.88em;margin:0;color:#950000;padding:0 0.16em;}tbody tr:nth-child(even){background-color:#F0F0F0;}th{background-color:#E6E6E6;color:black;}th, td{padding:0.16em 0.55em;vertical-align:top;}table td + td{border-left:1px solid gray;}table th + th{border-left:1px solid gray;}table{border-color:Black;margin:1.5em 0;border:2px black;border-collapse:collapse;font-family:APLFont;font-size:0.88em;line-height:1.2;border:1px solid Gray;}li > table{margin:0.55em 0 0.55em 0;}tr{margin:1.11em;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:0.27em solid silver;padding-left:0.27em;margin:0.83em 0.27em 0.83em 0.55em;}blockquote ul li{margin-left:1.38em;}blockquote ol li{margin-left:1.38em;}li > blockquote{margin-left:0;}nav{background-color:#f5f5f5;border:1px solid Black;padding:0.55em;margin:0.55em;margin-right:0;box-shadow:0.27em 0.27em 0.27em Gray;overflow:hidden;clear:both;}nav#main_nav{position:fixed;top:0;right:0.55em;float:none;width:auto;}nav#main_nav_no_collapse li{font-size:0.77rem;}nav#main_nav_no_collapse li{line-height:1.5;}nav ul{list-style-type:none;margin:0 0 0.11em 0;padding:0;}nav a:visited{color:black;}nav ul li{margin-bottom:0.16em;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:0.75rem;line-height:1.3;padding:0;margin-top:0;margin-bottom:0;margin-left:0.83em;}nav p{font-weight:bold;font-size:0.75rem;padding-top:0;}dl{margin-top:0.1em;margin-bottom:0.1em;}dt{margin-top:0.75em;margin-bottom:0.1em;font-weight:800;}label#hide_toc_label{font-size:0.8em;}.toc-container{position:relative;height:auto;}div.toc-container h1{font-size:0.88em;margin:0.27em 0 0.27em 0;}[type="checkbox"]{position:absolute;left:-9999px;}label{display:block;width:100%;height:1.1em;cursor:pointer;top:0;padding-left:1.1em;}label:before{content:'Table of contents \25BC';font-weight:bold;font-size:90%;padding-bottom:0;}[type="checkbox"] ~ div{display:none;}[type="checkbox"]:checked ~ div{display:block;margin-top:1.1em;}[type="checkbox"]:checked + label{top:100%;}[type="checkbox"]:checked + label:before{content:'Table of contents ▲';}div#footnotes_div p{line-height:1;padding-bottom:0;padding-top:0;}div#footnotes_div ol{padding-top:0;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("https://misc.aplteam.com/apl385.ttf") format("truetype");}.no_display{display:none;}.red{color:red;}.center{text-align:center;margin-left:auto;margin-right:auto;}.left{text-align:left;margin-right:0 auto;}.right{text-align:right;margin-left:0 auto;}img{margin-top:0.55em;margin-bottom:0.27em;}div.leanpub{padding:0.83em 0.55em 1.11em 0;margin:0.55em 0 0 0.27em;overflow:auto;}div.leanpub_A{border:1px solid black;background-color:#f1f1f1;padding:0.55em;margin:1.11em 0 0.83em 0;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:0.27em 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 1.11em 0.27em 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub img{float:left;padding:0;margin:0.55em 1.11em 0 0;clear:both;}div.leanpub tbody *{background-color:transparent;}div.leanpub p{padding:0.17em 0 0 0;margin:0;}span.leanpub_code{color:Red;}div.leanpub p{display:block;padding:0.44em 0 0 0;}div.leanpub > div{margin-left:2.27em;}.print_only{display:none;}
</style>
<style media="print">
@page{margin:25mm 20mm 25mm 20mm;}body{font-family:"Bookman Old Style", "Callisto MT", Bookman,"Goudy Old Style", Garamond, serif;font-size:9pt;line-height:1.2;}h1{font-size:170%;}h2{font-size:110%;}h3{font-size:110%;}h4{font-size:105%;}h5{font-size:100%;}h6{font-size:95%;}h1{margin:0 0 20pt 0;}h2{margin:15pt 0 3pt 0;}h3{margin:10pt 0 0pt 0;}h4{margin:10pt 0 0pt 0;}h5{margin:9pt 0 0pt 0;}h6{margin:9pt 0 0pt 0;}h1, h2, h3, h4, h5, h6{color:black;font-family:"Century Gothic", Verdana, "Sans";page-break-after:avoid;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:100%;}h2{border-bottom:1pt solid Silver;padding-bottom:2pt;}.h_tag{page-break-after:avoid;break-after:avoid;}abbr[title]{border-bottom:0;text-decoration:none;}a{color:black;margin:0;padding:0;vertical-align:baseline;text-decoration:none;font-style:italic;}a.autoheader_anchor{text-decoration:none;font-style:normal;page-break-after:avoid;break-after:avoid;}ul{list-style-type:square;}ul, ol{padding:0;margin:0;margin-top:10pt;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:13pt;margin-bottom:5pt;}ul > li{margin-left:25pt;}ol > li{margin-left:25pt;}li ul{margin-left:5pt;}li ul{margin-left:3pt;}li p{padding:1pt 0 0 0;margin:5pt 0 3pt 0;line-height:1.3;}p, ul, ol{line-height:1.3;padding:4pt 0 0 0;margin:0;color:black;}ul, ol{margin-top:0.75em;}pre{padding:3pt;margin:5pt 0;white-space:pre-wrap;background-color:#FAFAFA;border:1pt Silver solid;display:block;font-family:APLFont, monospace;page-break-inside:avoid;}pre code{background-color:#FAFAFA;color:Black;padding:0;margin:0 0 -6pt 0;line-height:1.1;border:0;white-space:pre-wrap;}code{font-family:APLFont, monospace;line-height:1.2;font-size:9pt;padding:3pt 1pt 3pt 1pt;color:#950000;padding:3pt 0pt 3pt 0pt;margin:0;}tbody th, tfoot tr{background-color:#e6e6e6;}tbody tr:nth-child(even){background-color:#fafafa;}th{background-color:#F0F0F0;}th, td{padding:1pt 5pt;border:1px solid #E3E3E3;vertical-align:top;}table td + td{border-left:1px solid gray;}table th + th{border-left:1px solid gray;}table code{font-style:normal;padding-left:0;padding-right:0;}table{margin:1.5em 0;font-family:APLFont;font-size:9pt;padding:0;border:1pt solid silver;border-collapse:collapse;}li > table{margin:10pt 0 10pt 0;}tr{margin:20pt;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:5pt solid silver;padding-left:5pt;margin:8pt 3pt 8pt 8pt;}nav{background-color:#f8f8f8;border:1pt solid Gray;width:auto;float:right;padding:5pt 5pt 5pt 0;margin:5pt 0 5pt 5pt;page-break-inside:avoid;break-inside:avoid;clear:both;overflow:hidden;}nav *{font-size:75%;}nav ul{list-style-type:none;margin:0 0 2pt 0;padding:0;}nav ul li{margin-bottom:0;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:9pt;line-height:1;padding:0;margin-top:0;margin-bottom:0;margin-left:8pt;}dl{margin-top:0;margin-bottom:10pt;}dt{margin-top:10pt;margin-bottom:0;font-weight:800;page-break-inside:avoid;}dd{margin-top:2pt;}label#hide_toc_label{font-size:65%;}.toc-container{position:relative;height:auto;margin-top:2pt;background-color:inherit;}.toc-container h3{margin:0 0 2pt 7pt;}[type="checkbox"]{display:none;}label{display:block;width:100%;height:1.1em;top:0;padding-left:10pt;}label:before{content:'Table of contents';font-weight:bold;font-size:140%;padding-bottom:10pt;}a.external_link::before{content:" 🌎";}a.bookmark_link::before{content:" ➯";}a.mailto_link::before{content:" ✉"}nav a.bookmark_link{font-style:normal;}nav p{margin-left:10pt;font-weight:bold;font-size:9pt;}nav a{font-style:normal;}nav a.bookmark_link::before{content:"";}div#footnotes_div a::before{content:"";}div#footnotes_div a{font-style:normal;}div#footnotes_div{page-break-inside:avoid;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("https://misc.aplteam.com/apl385.ttf") format("truetype");}.no_print{display:none;}.red{color:red;}.center{text-align:center;margin:0 auto;}.left{text-align:left;margin-right:0 auto;}.right{text-align:right;margin-left:0 auto;}.avoid_page_break{page-break-inside:avoid;}.page_break_before{page-break-before:always;}div.leanpub{margin:10pt 0 10pt 8pt;page-break-inside:avoid;}div.leanpub_A{border:1pt solid black;background-color:#f9f9f9;padding:5pt;margin:10pt 0 10pt 0;page-break-inside:avoid;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:3pt 0 0 0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:3pt 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 10pt 2pt 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub > div > h1:first-child{padding-top:5pt;}div.leanpub img{float:left;padding:0;margin:5pt 10pt 0 0;clear:both;}div.leanpub p{padding:3pt 0 0 0;margin:0;}span.leanpub_code{font-weight:bold;}div.leanpub p{display:block;padding:8pt 0 0 0;}div.leanpub > div{margin-left:35pt;}sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;top:-0.4em;}
</style>

</head>
<body>
<nav id="main_nav">
<input type="checkbox" id="hide_toc">
<label id="hide_toc_label" for="hide_toc"></label>
<div class="toc-container">
<ul>
<li><a href="#Overview">1. Overview</a></li>
<li><a href="#Details">2. Details</a>
<ul>
<li><a href="#Introduction">2.1. Introduction</a></li>
<li><a href="#User-defined-variables">2.2. User-defined variables</a></li>
<li><a href="#Tatins-package-configuration-variables">2.3. Tatin's package configuration variables</a>
<ul>
<li><a href="#api">2.3.1. api</a></li>
<li><a href="#assets">2.3.2. assets</a></li>
<li><a href="#deprecated">2.3.3. deprecated</a></li>
<li><a href="#deprecate_comment">2.3.4. deprecate_comment</a></li>
<li><a href="#description">2.3.5. description</a></li>
<li><a href="#documentation">2.3.6. documentation</a></li>
<li><a href="#files">2.3.7. files</a></li>
<li><a href="#GetFullPath2AssetsFolder">2.3.8. GetFullPath2AssetsFolder</a></li>
<li><a href="#group">2.3.9. group</a></li>
<li><a href="#license">2.3.10. license</a></li>
<li><a href="#lx">2.3.11. lx</a></li>
<li><a href="#maintainer">2.3.12. maintainer</a></li>
<li><a href="#minimumAplVersion">2.3.13. minimumAplVersion</a></li>
<li><a href="#name">2.3.14. name</a></li>
<li><a href="#os_win">2.3.15. os_win</a></li>
<li><a href="#os_mac">2.3.16. os_mac</a></li>
<li><a href="#os_lin">2.3.17. os_lin</a></li>
<li><a href="#project_url">2.3.18. project_url</a></li>
<li><a href="#source">2.3.19. source</a></li>
<li><a href="#tags">2.3.20. tags</a></li>
<li><a href="#userCommandScript">2.3.21. userCommandScript</a></li>
<li><a href="#version">2.3.22. version</a></li>
<li><a href="#SysVars">2.3.23. APL System variables: ⎕IO and ⎕ML</a></li>
<li><a href="#Injected-values">2.3.24. Injected values</a>
</li></ul></li>
</li></ul></li>
</ul>
</div>
</nav>
<div class="h_tag">
<a href="#Tatins-package-Configuration-File" id="Tatins-package-Configuration-File" class="autoheader_anchor">
<h1 data-id="Tatins-package-Configuration-File">Tatin's package Configuration File</h1>
</a>
</div>
<div class="h_tag">
<a href="#Overview" id="Overview" class="autoheader_anchor">
<h2 data-id="Overview">1. Overview</h2>
</a>
</div>
<p>Every package has a configuration file: that's one of the things that make it a package. It defines all that is required to consume the package and to announce its existence to the world.</p>
<p>This is an example:</p>
<pre><code>{
  api: "DotNetZip",
  assets: "",
  description: "Zipping and unzipping with.NET Core on all major platforms",
  documentation: "",
  group: "aplteam",
  project_url: "https://github.com/aplteam/DotNetZip",
  io: 1,
  ml: 1,
  name: "DotNetZip",
  source: "DotNetZip.aplc",
  tags: "zip-tools",
  version: "0.5.4",
}</code></pre>
<p>This is saved in a file <code>apl-package.json</code> which must live in the root of what is a package.</p>
<p>Notes:</p>
<ul>
<li>You might see <code>wx</code> in an older package: with version 0.61.0 <code>wx</code> was removed from package config files.</li>
<li>When viewing a package config file on a Tatin Server you will also see <code>date</code>: this is injected by the Tatin server: it is the package's publishing date.</li>
</ul>
<div class="h_tag">
<a href="#Details" id="Details" class="autoheader_anchor">
<h2 data-id="Details">2. Details</h2>
</a>
</div>
<div class="h_tag">
<a href="#Introduction" id="Introduction" class="autoheader_anchor">
<h3 data-id="Introduction">2.1. Introduction</h3>
</a>
</div>
<p>In the workspace, a simple namespace can be used for package configuration. On file, it is saved as JSON5. Tatin's API offers a function <code>Tatin.InitialisePackage</code> that can be used to create a package config file.</p>
<p>It can be fed with an empty vector as the right argument: then just defaults are established.</p>
<p>Instead, you may create a namespace and populate that namespace with Tatin package configuration variables which are discussed underneath. In this case, the values in the namespace overwrite the defaults.</p>
<p>Example:</p>
<pre><code>      parms←⎕NS''
      parms.group←'aplteam'
      parms.name←'Foo'
      parms.version←'1.0.0'
      Tatin.InitialisePackage parms</code></pre>
<p>The user command equivalent is <code>]tatin.PackageConfig</code></p>
<div class="leanpub">
<img src="https://download.aplwiki.com/LeanPub/Images/information.png" alt="Information">
<div>
<p>Instead of <code>]tatin.PackageConfig -edit</code> you may also enter <code>]tatin.CreatePackage</code></p>
</div>
</div>

<div class="h_tag">
<a href="#User-defined-variables" id="User-defined-variables" class="autoheader_anchor">
<h3 data-id="User-defined-variables">2.2. User-defined variables</h3>
</a>
</div>
<p>You may define your own variables in a package configuration file.</p>
<p>However, since more Tatin-specific variables might be added at a later stage there is a danger of name clashes. This is avoided by a simple rule:</p>
<table>
<tbody>
<tr>
<td><strong>The names of user-defined variables <em>must</em> start with an underscore</strong></td>
</tr>
</tbody>
</table>
<p>If you specify any variable with a name that Tatin does not know about and that does not start with an underscore an error will be thrown.</p>
<div class="h_tag">
<a href="#Tatins-package-configuration-variables" id="Tatins-package-configuration-variables" class="autoheader_anchor">
<h3 data-id="Tatins-package-configuration-variables">2.3. Tatin's package configuration variables</h3>
</a>
</div>
<div class="h_tag">
<a href="#api" id="api" class="autoheader_anchor">
<h4 data-id="api">2.3.1. api</h4>
</a>
</div>
<p>“api”, if not empty, must be a single namespace or a single class <em>but neither a function nor an operator</em>. It must be relative to <code>source</code>.</p>
<p>It might use dottet syntax.</p>
<p>There are several scenarios:</p>
<ol start="1">
<li>The package consists of a single class or a single namespace, be it scripted or not</li>
<li>The package consists of a single function or operator</li>
<li>The package consists of several objects: a mixture of functions, operators, classes and/or namespaces</li>
</ol>
<div class="leanpub_A">
<h3>Single functions</h3>
<p>You <em>must not</em> specify the name of a function (or an operator) as the API in any of these cases.</p>
<p>This restriction helps to avoid confusion, but there is also a technical issue: Tatin needs to establish references to the API, and although in Dyalog one can establish references (kind of) to monadic, ambivalent, and dyadic functions, this is not possible for neither operators nor niladic functions.</p>
</div>

<div class="h_tag">
<a href="#A-single-namespace" id="A-single-namespace" class="autoheader_anchor">
<h5 data-id="A-single-namespace">2.3.1.1. A single namespace</h5>
</a>
</div>
<ul>
<li>If you don't specify <code>api</code> then the name of the namespace is the API.
<p>For example, if the package name is <code>pkgName</code> and the namespace's name is <code>foo</code> and it has a function <code>Hello</code>, then you call <code>Hello</code> with:</p>
<p><code>pkgName.foo.Hello</code></p></li>
<li>If you do specify <code>api</code> by assigning an APL name to it (=no extension), then it must be the name of the namespace. In that case, the <em>contents</em> of the namespace become the API.
<p>For example, if the package name is <code>pkgName</code> and the namespace's name is <code>foo</code> and it has a function <code>Hello</code>, then you specify <code>api</code> as <code>foo</code> and call <code>Hello</code> with:</p>
<p><code>pkgName.Hello</code></p></li>
</ul>
<div class="h_tag">
<a href="#A-single-class" id="A-single-class" class="autoheader_anchor">
<h5 data-id="A-single-class">2.3.1.2. A single class</h5>
</a>
</div>
<ul>
<li>If you don't specify <code>api</code> then the name of the class is the API.
<p>For example, if the package name is <code>pkgName</code> and the class name is <code>foo</code> and it has a function <code>Hello</code>, then you call <code>Hello</code> with:</p>
<p><code>pkgName.foo.Hello</code></p></li>
<li>If you do specify <code>api</code> then it must be the name of the class. In that case, everything in the class with <code>:Access Public Shared</code> becomes the API.
<p>For example, if the package name is <code>pkgName</code> and the class name is <code>foo</code> and it has a publicly shared function <code>Hello</code>, then you call <code>Hello</code> with:</p>
<p><code>pkgName.Hello</code></p></li>
</ul>
<div class="h_tag">
<a href="#A-single-function-or-operator" id="A-single-function-or-operator" class="autoheader_anchor">
<h5 data-id="A-single-function-or-operator">2.3.1.3. A single function or operator</h5>
</a>
</div>
<p>If the name of the package is <code>pkgName</code>, and the name of the function is <code>MyFns</code>, then it is called as <code>pkgName.MyFns</code>. The function may be niladic, monadic, ambivalent or dyadic.</p>
<p>The same holds for an operator.</p>
<p>In this particular case <code>api</code> <em>must not</em> be defined (remain empty).</p>
<div class="h_tag">
<a href="#A-mixture-of-several-APL-objects" id="A-mixture-of-several-APL-objects" class="autoheader_anchor">
<h5 data-id="A-mixture-of-several-APL-objects">2.3.1.4. A mixture of several APL objects</h5>
</a>
</div>
<ul>
<li>If <code>api</code> is not set then all top-level objects of the package become the API: functions, operators, namespaces, classes, interfaces.</li>
<li>If <code>api</code> is set then it must point to one of the namespaces or classes, or a sub-namespace (using dotted syntax), or a class in a sub-namespace. Then just the objects in what <code>api</code> is pointing to become the API.</li>
</ul>
<div class="h_tag">
<a href="#Restricting-whats-public" id="Restricting-whats-public" class="autoheader_anchor">
<h5 data-id="Restricting-whats-public">2.3.1.5. Restricting what's “public”</h5>
</a>
</div>
<p>The user might want to expose only a subset of functions/operators of a namespace (classes have such an interface anyway: <code>:Public Shared</code>), and in that case, the user must not only specify <code>api</code>, but also structure her code accordingly.</p>
<p>If the name of the package is <code>pkgName</code>, and it is loaded into <code>#</code>, and you want to expose only the functions <code>Run</code> and <code>CreateParmSpace</code>, then the recommended way of doing this is to create a sub-namespace with the name (say) <code>MyAPI</code> and populate it with two functions:</p>
<ul>
<li><code>Run</code>:
<pre><code>Run←{⍺←⊢ ⋄ ⍺ ##.Run ⍵}</code></pre>
<p>(Assumes that <code>Run</code> takes an optional left argument)</p></li>
<li><code>CreateParmSpace</code>:
<pre><code>CreateParmSpace←{##.CreateParmSpace ⍵}</code></pre>
<p>(Assumes that <code>CreateParmSpace</code> does not accept a left argument)</p></li>
</ul>
<p>Finally, you need to specify <code>api: "MyAPI"</code> in the package config file.</p>
<p>Calling the function <code>Run</code> (after loading the package) would then require:</p>
<pre><code>      #.PkgName.Run</code></pre>
<p>To the outside world, only two functions are visible:</p>
<pre><code>      #.PkgName.⎕nl ⍳16
#.Foo.Run
#.Foo.CreateParmSpace</code></pre>
<p>Similarly, if <code>PkgName</code> consists of the two namespaces <code>Boo</code> and <code>Goo</code>, and <code>Run</code> and <code>CreateParmSpace</code> live in <code>Boo</code>, then you could also have a sub-namespace <code>Boo.API</code> that hosts <code>Run</code> and <code>CreateParmSpace</code>, and <code>api</code> would be <code>Boo.API</code>, while calls are still <code>PkgName.Run</code> and <code>PkgName.CreateParmSpace</code>.</p>
<div class="h_tag">
<a href="#assets" id="assets" class="autoheader_anchor">
<h4 data-id="assets">2.3.2. assets</h4>
</a>
</div>
<p>If this is empty then the package has no assets. Instead it can point to a folder hosting assets.</p>
<p>The folder must be relative to the package since the folder is part of the package. For that reason, a folder may not contain a “<code>:</code>”, and not start with “<code>/</code>”. If one does anyway an error is thrown.</p>
<p>There is one exception: when an absolute path is specified but it's partly identical to what will become <code>HOME</code> (the folder where the package lives) then Tatin removes that part silently, making it effectively relative.</p>
<p>Notes:</p>
<ul>
<li>When the package configuration file is written to disk the existence of “assets” is checked. If it's not a folder an error is thrown.
<p>See also the <a href="#GetFullPath2AssetsFolder" class="bookmark_link"><code>GetFullPath2AssetsFolder</code></a> function.</p></li>
<li>The <code>assets\</code> folder must be considered read-only. Never write to it from a package!</li>
<li>Watch out for the convention regarding a file “LICENSE” in the root of a project; refer to the “Server-TipsAndTricks” document for details</li>
<li>Check the “<a href="#files" class="bookmark_link">files</a>” property for files like “ReadMe.txt” and the like</li>
<li>A file named “LICENSE” in the root of a project will always be copied to the root of a package</li>
</ul>
<div class="leanpub_A">
<h3>Accessing assets from a class instance</h3>
<p>In case you need to access assets from an instance of a class in a package you have two choices:</p>
<ol start="1">
<li>Add to the class a function like this:
<pre><code>r←GetAssetFolder
r←##.TatinVars.GetFullPath2AssetsFolder</code></pre></li>
<li>Use the expression <code>⊃⊃⎕CLASS ⎕THIS</code> to find out where the class script lives.
<p>Therefore the following expression returns the path to the assets:</p>
<pre><code>(⊃⊃⎕CLASS ⎕THIS).##.TatinVars.GetFullPath2AssetsFolder</code></pre></li>
</ol>
</div>

<div class="h_tag">
<a href="#deprecated" id="deprecated" class="autoheader_anchor">
<h4 data-id="deprecated">2.3.3. deprecated</h4>
</a>
</div>
<p>An optional Boolean.</p>
<p>It is injected into a package config file by the <code>]Tatin.DeprecatePackage</code> command. A 1 means that this package is deprecated.</p>
<div class="h_tag">
<a href="#deprecate_comment" id="deprecate_comment" class="autoheader_anchor">
<h4 data-id="deprecate_comment">2.3.4. deprecate_comment</h4>
</a>
</div>
<p>An optional character vector.</p>
<p>It is injected into a package config file by the <code>]Tatin.DeprecatePackage</code> command.</p>
<p>Supposed to give a hint why a package is deprecated, for example, “See package XYZ instead”.</p>
<div class="h_tag">
<a href="#description" id="description" class="autoheader_anchor">
<h4 data-id="description">2.3.5. description</h4>
</a>
</div>
<p>A short description of what the package is supposed to do, or what kind of problems it solves. This is supposed to be readable and meaningful to humans.</p>
<p>This information is typically used when a human accesses a Tatin Server with a Browser.</p>
<p><code>description</code> <em>must not</em> be empty.</p>
<div class="h_tag">
<a href="#documentation" id="documentation" class="autoheader_anchor">
<h4 data-id="documentation">2.3.6. documentation</h4>
</a>
</div>
<p>This can be one of:</p>
<ul>
<li>A URL pointing to an online help resource
<p>It is identified by starting with either “<code>http://</code>” or “<code>https://</code>”.</p></li>
<li>A local path pointing to a file (or program) within the package
<p>In this case, it <em>must</em> be a relative path since you cannot know in advance where your package ends up.</p>
<p>It must start with “<code>./</code>”.</p></li>
<li>A pointer to a function or a variable inside the package
<p>It must start with “<code>⎕THIS.</code>”, and whatever follows must be valid APL name(s). Examples:</p>
<pre><code>⎕THIS.ShowHelp
⎕THIS.Admin.ShowHelp</code></pre></li>
</ul>
<p>Content that does not qualify for one of these options will be rejected.</p>
<div class="h_tag">
<a href="#files" id="files" class="autoheader_anchor">
<h4 data-id="files">2.3.7. files</h4>
</a>
</div>
<p>You might want to get one or more specific files into the root of the package although they are not really assets.</p>
<p>Typical examples are “LICENSE” and “ReadMe.[md|txt|html]”. Strictly speaking they are not assets because the package will still function perfectly well without them. Also, you want them to go to the root of the project, not into a sub-folder, so that they stand out.</p>
<p>That can be achieved by adding them to the “files” property. This can be one of:</p>
<ul>
<li>Absend</li>
<li>Empty</li>
<li>A single file</li>
<li>A comma-separated list of files</li>
</ul>
<p>Note that if it specifies a sub-folder <code>BuildPackage</code> will copy the file from that project-specific sub-folder to the root of the package.</p>
<p>See als “<a href="#assets" class="bookmark_link">assets</a>”.</p>
<div class="h_tag">
<a href="#GetFullPath2AssetsFolder" id="GetFullPath2AssetsFolder" class="autoheader_anchor">
<h4 data-id="GetFullPath2AssetsFolder">2.3.8. GetFullPath2AssetsFolder</h4>
</a>
</div>
<p>In case <a href="#assets" class="bookmark_link"><code>assets</code></a> is not empty this function returns a simple char vector that represents the <em>full path</em> to the assets, using something like:</p>
<pre><code>  HOME,'/',ASSETS</code></pre>
<ul>
<li>If <code>HOME</code> is empty the function returns just <code>ASSETS</code></li>
<li>If <code>ASSETS</code> is empty the functions returns <code>''</code></li>
<li>If <code>HOME</code> is not empty but does not exist on disk just <code>ASSETS</code> is returned</li>
</ul>
<div class="h_tag">
<a href="#group" id="group" class="autoheader_anchor">
<h4 data-id="group">2.3.9. group</h4>
</a>
</div>
<p>The group part of the package ID[<a href="#fnref1" class="footnote_link"><sup>1</sup></a>]</p>
<p>A group may be the name of a user, the owner, a company, an application name, a publisher or anything else that makes sense. It's totally up to you and might well depend on who is running the Tatin Server you want to publish to.</p>
<div class="h_tag">
<a href="#license" id="license" class="autoheader_anchor">
<h4 data-id="license">2.3.10. license</h4>
</a>
</div>
<p>This may be empty, or it may specify a license such as:</p>
<pre><code>  license: "MIT",</code></pre>
<p>You may not be able to publish a package to a Tatin registry without specifying a license: this depends on the licensing policy of a particular registry. The main Tatin registry <a href="https://tatin.dev" class="external_link">https://tatin.dev</a> is an example: you <em>must</em> specify a license in order to publish a package to it. Note that you can specify a default license in your user settings:</p>
<pre><code>]TATIN.UserSettings -edit</code></pre>
<p>At the bottom there are defaults defined for <code>license</code> and <code>source</code> and possibly other properties. If it is not empty then the value will be used as default when creating a new package config file.</p>
<p>Both the user command <code>]Tatin.ListLicenses</code> and the API function <code>⎕SE.Tatin.ListLicenses</code> can be used to get a list of all licenses tolerated by a Tatin Registry.</p>
<div class="h_tag">
<a href="#lx" id="lx" class="autoheader_anchor">
<h4 data-id="lx">2.3.11. lx</h4>
</a>
</div>
<p>This is optional: it may or may not exist, and it might be empty if it does exist\.</p>
<p>In case it is not empty it must be the name of a niladic or monadic function that resides in the top-level namespace of the package (<em>not</em> in what might be defined as API!) or a shared method of a class.</p>
<p>This function will be executed by either <code>LoadPackages</code> or <code>LoadDependencies</code> <em>after</em> all dependencies have been loaded and all refs got established.</p>
<p>If the function is monadic it will be fed with the path where the package lives on disk. If the package was brought into the WS by <code>LoadPackages</code> and has no assets then the right argument will be empty.</p>
<p>The function may or may not return a result. A result is assigned to <code>TatinVars.LX</code> inside the package namespace. If there is no result <code>TatinVars.LX</code> becomes an empty vector. Without an <code>lx</code> function there won't be a variable <code>LX</code> in <code>TatinVars</code>.[<a href="#fnref3" class="footnote_link"><sup>3</sup></a>]</p>
<p>The <code>lx</code> function will be executed under error trapping, and any errors will be silently ignored. If you do not want this then you have two options:</p>
<ul>
<li>Make <code>⎕TRAP</code> a local variable in the <code>lx</code> function and assign <code>⎕TRAP←0 'S'</code> to it to make any problem popping up straight away</li>
<li>Put <code>:TRAP ⋄ :EndTrap</code> around the code in the <code>lx</code> function and deal with problems yourself, for example in the <code>:Else</code> branch.</li>
</ul>
<p>Note that the existence of a variable <code>TatinVars.LX</code> indicates that there was an <code>lx</code> function executed successfully, even when <code>TatinVars.LX</code> is empty.</p>
<p>If no variable <code>TatinVars.LX</code> exists then there was either no <code>lx</code> function defined in the package config file or the function did crash.</p>
<div class="h_tag">
<a href="#maintainer" id="maintainer" class="autoheader_anchor">
<h4 data-id="maintainer">2.3.12. maintainer</h4>
</a>
</div>
<p>This may be left empty. If set it must be an email address.</p>
<p>These formats are valid:</p>
<pre><code>your name &lt;your.name@your-domain.com&gt;
your.name &lt;your.name@your-domain.com&gt;
your.name@your-domain.com</code></pre>
<p>Note that any double quotes will be removed.</p>
<p>If this is empty the server will, when the package is published, check whether there is a group home page. If that's the case then there is an email address associated with that group, and that email address is then assigned to <code>maintainer</code>.</p>
<div class="h_tag">
<a href="#minimumAplVersion" id="minimumAplVersion" class="autoheader_anchor">
<h4 data-id="minimumAplVersion">2.3.13. minimumAplVersion</h4>
</a>
</div>
<p>A character vector that must contain something like “18.0”. 18.0 is the minimum version for any Tatin package, for Tatin itself needs at least version 18.0.</p>
<div class="h_tag">
<a href="#name" id="name" class="autoheader_anchor">
<h4 data-id="name">2.3.14. name</h4>
</a>
</div>
<p>The name part of the package ID[<a href="#fnref1" class="footnote_link"><sup>1</sup></a>]</p>
<div class="h_tag">
<a href="#os_win" id="os_win" class="autoheader_anchor">
<h4 data-id="os_win">2.3.15. os_win</h4>
</a>
</div>
<p>A Boolean; a 1 means that the package runs under Windows.</p>
<div class="h_tag">
<a href="#os_mac" id="os_mac" class="autoheader_anchor">
<h4 data-id="os_mac">2.3.16. os_mac</h4>
</a>
</div>
<p>A Boolean; a 1 means that the package runs under Mac-OS.</p>
<div class="h_tag">
<a href="#os_lin" id="os_lin" class="autoheader_anchor">
<h4 data-id="os_lin">2.3.17. os_lin</h4>
</a>
</div>
<p>A Boolean; a 1 means that the package runs under Linux.</p>
<div class="h_tag">
<a href="#project_url" id="project_url" class="autoheader_anchor">
<h4 data-id="project_url">2.3.18. project_url</h4>
</a>
</div>
<p>A URL that points to something like GitHub.</p>
<p>An example is <code>https://github.com/aplteam/MarkAPL</code></p>
<p>It's supposed to point to a place on the Web where the project that the package was built from is hosted.</p>
<div class="h_tag">
<a href="#source" id="source" class="autoheader_anchor">
<h4 data-id="source">2.3.19. source</h4>
</a>
</div>
<p>This defines the source code file(s) that are going to be part of the package.</p>
<p>Must be either the name of a text file that contains code or a folder that contains a collection of code files. <code>source</code> <em>must not</em> be empty.</p>
<p>If it's a single file it might be anything with the extension <code>.aplc</code> (a class script), <code>.apln</code> (a namespace script), <code>.aplf</code> (a function) or <code>.aplo</code> (an operator).</p>
<p>The <code>.dyalog</code> extension is supported for limited backward compatibility — Tatin does not guarantee complete compatibility with SALT. The <code>.dyalog</code> extension is still used by the user command framework, therefore Tatin must support it: a user command might well be delivered as a Tatin package. Note that outside this context using this extension is not encouraged.</p>
<p>If <code>source</code> is a folder it might contain any number and mixture of the aforementioned files. Any files with other extensions will be ignored.</p>
<p><code>source</code> must be relative to the root of the package.</p>
<p>Not that you may specify a default source in your user settings:</p>
<pre><code>]TATIN.UserSettings -edit</code></pre>
<p>At the bottom there are defaults defined for <code>license</code>, <code>source</code> etc.</p>
<div class="h_tag">
<a href="#Cider-and-Tatin" id="Cider-and-Tatin" class="autoheader_anchor">
<h5 data-id="Cider-and-Tatin">2.3.19.1. Cider and Tatin</h5>
</a>
</div>
<p>If you manage a project with Cider then you might wonder why both have a property <code>source</code> in their configuration file. The reason is that the Cider config file describes what's going on in the project while the Tatin package config files describe what is going on in the package that will eventually be consumed by a user.</p>
<p>Picture the following project “Foo” which consists of a single class <code>Foo</code>:</p>
<pre><code>/Foo/
     APLSource/
               Admin/
               ...
               TestCases/
               ...
               Foo.aplc
     cider.config
     apl-package.json
     README.md</code></pre>
<p>In <code>cider.config</code> the <code>source</code> parameter must be set to <code>APLSource</code> because that's where all the code lives.</p>
<p>In <code>apl-package.json</code> however <code>source</code> may be set to <code>APLSource/Foo.aplc</code> because you might decide that this is what will end up in the package.</p>
<p>A slightly more complex example with a namespace that hosts several functions:</p>
<pre><code>/Goo/
     APLSource/
               Admin/
               ...
               TestCases/
               ...
               Goo/
                  Function1.aplf
                  Function2.aplf
     cider.config
     apl-package.json
     README.md</code></pre>
<p>In this case, the <code>source</code> in the package could become <code>APLSource/Goo</code> while <code>Admin</code> and <code>TestCases</code> are most likely not copied over into the package.</p>
<div class="h_tag">
<a href="#tags" id="tags" class="autoheader_anchor">
<h4 data-id="tags">2.3.20. tags</h4>
</a>
</div>
<p>A simple text vector, possibly empty (though that is not recommended), that should contain a comma-separated list of tags (keywords). These can be helpful to filter packages when searching for a solution to a particular problem.</p>
<p><code>tags</code> must not be empty if you wish to publish a package to a Tatin server because such a package would not be accepted by the server.</p>
<p>Tags should only be related to the problems one can solve with a particular package. There is no need to specify the platform since they have their own properties: <code>os_lin</code>, os_mac<code>, </code>os_win`. Those got introduced with version 0.81.0.</p>
<p>There is also no point in adding tags like “dyalog” or “apl” to a package: Tatin is a Dyalog APL package manager…</p>
<p>Note that people in charge of the principal Tatin server will have an eye on the tags, and might silently correct them to keep them consistent and meaningful.</p>
<div class="h_tag">
<a href="#userCommandScript" id="userCommandScript" class="autoheader_anchor">
<h4 data-id="userCommandScript">2.3.21. userCommandScript</h4>
</a>
</div>
<p>If a package is a user command then this must contain the path to the user command script relative to the projects root. <code>InstallPackages</code> uses this to identify a user command script and to move it from the source folder (if any) to the root of the install folder.</p>
<p>This optional flag was introduced with version 0.86.0. It might not exist in older versions of a package. If it does not exist then Tatin assumes that the package in question is not a user command.</p>
<div class="h_tag">
<a href="#version" id="version" class="autoheader_anchor">
<h4 data-id="version">2.3.22. version</h4>
</a>
</div>
<p>The version[<a href="#fnref2" class="footnote_link"><sup>2</sup></a>] part of the package ID[<a href="#fnref1" class="footnote_link"><sup>1</sup></a>]</p>
<p>Examples of valid version numbers are:</p>
<pre><code>1.2.3
1.2.3-beta1
1.2.3-beta1+30164
18.0.0+30165</code></pre>
<p>The optional build number, separated by the <code>+</code> sign, is ignored by Tatin.</p>
<p>For details see the <a href="./SemanticVersioning.html" class="external_link" title="SemanticVersioning.html">Tatin and Semantic Versioning</a> document.</p>
<div class="h_tag">
<a href="#SysVars" id="SysVars" class="autoheader_anchor">
<h4 data-id="SysVars">2.3.23. APL System variables: ⎕IO and ⎕ML</h4>
</a>
</div>
<p>By default the package configuration file carries the values of the two Dyalog parameters (environment variables) <code>Default_IO</code> and <code>Default_ML</code> for the system variables <code>⎕IO</code> and <code>⎕ML</code>, or, if these are not defined, <code>⎕IO←1</code> and <code>⎕ML←1</code> which are the built-in defaults.</p>
<p>Tatin uses these values for setting the system variables accordingly in any namespace that is created by either the <code>LoadPackages</code> or the <code>LoadDependencies</code> function <em>before</em> any code is loaded into them. This is important because that makes any sub-namespace created later on inherit those values.</p>
<div class="h_tag">
<a href="#Injected-values" id="Injected-values" class="autoheader_anchor">
<h4 data-id="Injected-values">2.3.24. Injected values</h4>
</a>
</div>
<div class="h_tag">
<a href="#date" id="date" class="autoheader_anchor">
<h5 data-id="date">2.3.24.1. date</h5>
</a>
</div>
<p>The user must not specify “date”, but when a package is published the server will inject “date” as a timestamp in the format <code>yyyymmdd.hhmmss</code>.</p>
<p>This date might play an important role in determining the precedence of versions. This is because although it's obvious which version is “better” when you look at these two packages:</p>
<pre><code>group-name-1.0.0
group-name-1.1.0</code></pre>
<p>it is less obvious when you look at these:</p>
<pre><code>group-name-1.0.0-alpha
group-name-1.1.0-beta</code></pre>
<p>and it cannot be determined at all with these packages:</p>
<pre><code>group-name-1.0.0-TryFeature1
group-name-1.1.0-FixFor234</code></pre>
<p>Since packages, once published, cannot be altered, it is safe to assume that the publishing date determines the correct order. However, as long as the version consists of just digits and dots, and possibly a build number, <code>date</code> does not play a role in determining precedence.</p>
<div class="h_tag">
<a href="#url" id="url" class="autoheader_anchor">
<h5 data-id="url">2.3.24.2. url</h5>
</a>
</div>
<ul>
<li>When a package is loaded or installed from a Tatin Server, “url” is injected and points back to that server.</li>
<li>When a package is loaded or installed from a file, “url” is injected and points to that file.</li>
</ul>
<div id="footnotes_div">
<hr>
<p><strong>Footnotes</strong></p>
<ol>
<li id="fnref1"><p>A package ID consists of <code>{group}-{name}-{major}.{minor}.{patch}</code></p><a href="#fnref1" class="footnote_anchor"></a>
<li id="fnref2"><p>A version is built from the major number, the minor number and the version number, optionally followed by a build number</p><a href="#fnref2" class="footnote_anchor"></a>
<li id="fnref3"><p>The Tatin package variables are discussed in detail in the document <code>FirstStepsWithTatin.html</code></p><a href="#fnref3" class="footnote_anchor"></a>
</ol>
</div>
</body>
</html>
