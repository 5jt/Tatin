 response←request GetBestVersionNumber packageID;bestVersion;ns;group;includeBetas
⍝ `path` is fully qualified. The packageID part might have just a major version no. or no version numer at all
 :If Reg.IsValidPackageName packageID
     :If 0<≢group←EstablishGroup packageID
         packageID←group,packageID
     :Else
         response←'Package not found'Return404 request
     :EndIf
 :EndIf
 :If 0=≢includeBetas←request R.GetHeaderValue'include-betas'
     includeBetas←0
 :Else
     includeBetas←includeBetas∊'yY'
 :EndIf
 bestVersion←(≢G.RegistryPath)↓includeBetas Reg.GetBestVersionNumber G.RegistryPath,packageID
 :If 0<≢bestVersion
     ns←⎕NS''
     ns.BestVersion←bestVersion
     response←request ReturnJSON Reg.JSON ns
 :Else
     response←'Package not found'Return404 request
 :EndIf
⍝Done
