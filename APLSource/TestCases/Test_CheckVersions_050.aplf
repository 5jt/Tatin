 r←Test_CheckVersions_050(stopFlag batchFlag);⎕TRAP;versions;expected;dir;result
⍝ Run CheckVersions on a package and then install the better version with default (=ignore better major versions)
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')
 r←T._Failed

 dir←GetTempDir''
 dir ⎕NCOPY⍠('Wildcard' 1)⊣'./TestData/Packages/Install-template/*'

 versions←TC.CheckForBetterVersion dir
 →T.PassesIf 1=≢versions
 →T.GoToTidyUp'aplteam-MarkAPL-9.1.13'≢TC.GetPackageIDFromFilename 1⊃versions
 result←TC.InstallPackage(1⊃versions)dir
 expected←'aplteam-'∘,¨'MarkAPL-9.1.13' 'APLTreeUtils-6.0.9' 'FilesAndDirs-3.2.15' 'OS-2.0.3' 'Tester2-2.2.21'
 →T.GoToTidyUp expected≢TC.GetPackageIDFromFilename¨result

 r←T._OK

∆TidyUp:
 F.RmDir dir
⍝Done
