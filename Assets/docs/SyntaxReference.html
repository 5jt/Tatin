<!DOCTYPE html>
<html lang="en" style="scroll-behavior:smooth" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title>Tatin Syntax Reference</title>
<style media="screen">
html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}body{margin:0;}article,aside,footer,header,nav,section{display:block;}h1{font-size:2em;margin:0.67em 0;}figcaption,figure,main{display:block;}figure{margin:1em 40px;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace, monospace;font-size:1em;}a{background-color:transparent;-webkit-text-decoration-skip:objects;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:inherit;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace, monospace;font-size:1em;}dfn{font-style:italic;}mark{background-color:#ff0;color:#000;}small{font-size:0.8em;}sub,sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}audio,video{display:inline-block;}audio:not([controls]){display:none;height:0;}img{border-style:none;}svg:not(:root){overflow:hidden;}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:1em;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,html [type="button"], [type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{display:inline-block;vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details, menu{display:block;}summary{display:list-item;}canvas{display:inline-block;}template{display:none;}[hidden]{display:none;}body{margin:0;font-family:"Bookman Old Style", "Callisto MT", Bookman, "Goudy Old Style", Garamond, serif;background-color:#fdfdfd;font-size:18px;line-height:1.4;max-width:900px;padding:0.83em;color:#292929;word-wrap:break-word;overflow-wrap:break-word;}h1, h2, h3, h4, h5, h6{color:#404040;font-weight:800;padding-left:0;}h1, h2, h3, h4, h5, h6{font-family:"Century Gothic", Verdana, "Sans";}h1, h2, h3, h4, p{margin-bottom:0.88em;}h1{font-size:1.8em;margin:0.27em 0 1.11em 0;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:1em;background-color:inherit;}h2{font-size:1.44em;margin:0.55em 0 0.55em 0;padding-top:0.55em;border-bottom:1px solid Silver;}h3{margin:0;margin-top:0.55em;font-size:1.22em;}nav h3{font-size:0.88em;margin-left:0.83em;margin-bottom:0.27em;}h4{font-size:1em;margin:0;margin-top:0.55em;}h5{font-size:0.94em;margin:0;margin-top:0.66em;padding:0;}h6{font-size:0.88em;margin:0;margin-top:0.66em;padding:0;}a{color:#0099ff;margin:0;padding:0;vertical-align:baseline;}a:visited{color:purple;}a.autoheader_anchor{text-decoration:none;}ul{list-style-type:disc;}dd{padding-top:0.25em;}p.first_dd{padding-top:0.25em;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:1.38em;margin-bottom:0.55em;}ul > li{margin-left:2.5em;}ol > li{margin-left:2.5em;}li ul{margin-left:0.55em;}li ul{margin-left:0.27em;}li p{padding:1px 0 0 0;margin:0.55em 0 0.27em 0;line-height:1.3;}ul, ol{line-height:1.3;padding:0.33em 0 0 0;margin:0.5em;margin-top:1.2em;}p{line-height:1.2;padding:0.40em 0 0 0;margin:0;}pre{overflow:scroll;padding:0.55em 0.27em;margin:0.55em 0 0.55em 0 !important;background-color:#faebd7;color:#3e3e3e;border:1px Silver dashed;display:block;font-family:APLFont, monospace;font-weight:normal;white-space:pre-wrap;}pre > code{line-height:1.2;border:0;padding:0;margin:0;background-color:inherit;color:inherit;font-weight:inherit;white-space:pre-wrap;}td code{padding:0;}a code{padding:0;font-size:1em;}nav code{background-color:inherit;font-weight:400;color:inherit;}code{font-family:APLFont, monospace;color:Black;font-weight:800;line-height:1.2;font-size:0.88em;margin:0;color:#950000;padding:0 0.16em;}tbody tr:nth-child(even){background-color:#F0F0F0;}th{background-color:#E6E6E6;color:black;}th, td{padding:0.16em 0.55em;vertical-align:top;}table td + td{border-left:1px solid gray;}table th + th{border-left:1px solid gray;}table{border-color:Black;margin:1.5em 0;border:2px black;border-collapse:collapse;font-family:APLFont;font-size:0.88em;line-height:1.2;border:1px solid Gray;}li > table{margin:0.55em 0 0.55em 0;}tr{margin:1.11em;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:0.27em solid silver;padding-left:0.27em;margin:0.83em 0.27em 0.83em 0.55em;}blockquote ul li{margin-left:1.38em;}blockquote ol li{margin-left:1.38em;}li > blockquote{margin-left:0;}nav{background-color:#f5f5f5;border:1px solid Black;padding:0.55em;margin:0.55em;margin-right:0;box-shadow:0.27em 0.27em 0.27em Gray;overflow:hidden;clear:both;}nav#main_nav{position:fixed;top:0;right:0.55em;float:none;width:auto;}nav#main_nav_no_collapse li{font-size:0.77rem;}nav#main_nav_no_collapse li{line-height:1.5;}nav ul{list-style-type:none;margin:0 0 0.11em 0;padding:0;}nav a:visited{color:black;}nav ul li{margin-bottom:0.16em;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:0.75rem;line-height:1.3;padding:0;margin-top:0;margin-bottom:0;margin-left:0.83em;}nav p{font-weight:bold;font-size:0.75rem;padding-top:0;}dl{margin-top:0.1em;margin-bottom:0.1em;}dt{margin-top:0.75em;margin-bottom:0.1em;font-weight:800;}label#hide_toc_label{font-size:0.8em;}.toc-container{position:relative;height:auto;}div.toc-container h1{font-size:0.88em;margin:0.27em 0 0.27em 0;}[type="checkbox"]{position:absolute;left:-9999px;}label{display:block;width:100%;height:1.1em;cursor:pointer;top:0;padding-left:1.1em;}label:before{content:'Table of contents \25BC';font-weight:bold;font-size:90%;padding-bottom:0;}[type="checkbox"] ~ div{display:none;}[type="checkbox"]:checked ~ div{display:block;margin-top:1.1em;}[type="checkbox"]:checked + label{top:100%;}[type="checkbox"]:checked + label:before{content:'Table of contents ▲';}div#footnotes_div p{line-height:1;padding-bottom:0;padding-top:0;}div#footnotes_div ol{padding-top:0;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("https://misc.aplteam.com/apl385.ttf") format("truetype");}.no_display{display:none;}.red{color:red;}.center{text-align:center;margin-left:auto;margin-right:auto;}.left{text-align:left;margin-right:0 auto;}.right{text-align:right;margin-left:0 auto;}img{margin-top:0.55em;margin-bottom:0.27em;}div.leanpub{padding:0.83em 0.55em 1.11em 0;margin:0.55em 0 0 0.27em;overflow:auto;}div.leanpub_A{border:1px solid black;background-color:#f1f1f1;padding:0.55em;margin:1.11em 0 0.83em 0;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:0.27em 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 1.11em 0.27em 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub img{float:left;padding:0;margin:0.55em 1.11em 0 0;clear:both;}div.leanpub tbody *{background-color:transparent;}div.leanpub p{padding:0.17em 0 0 0;margin:0;}span.leanpub_code{color:Red;}div.leanpub p{display:block;padding:0.44em 0 0 0;}div.leanpub > div{margin-left:2.27em;}.print_only{display:none;}
</style>
<style media="print">
@page{margin:25mm 20mm 25mm 20mm;}body{font-family:"Bookman Old Style", "Callisto MT", Bookman,"Goudy Old Style", Garamond, serif;font-size:9pt;line-height:1.2;}h1{font-size:170%;}h2{font-size:110%;}h3{font-size:110%;}h4{font-size:105%;}h5{font-size:100%;}h6{font-size:95%;}h1{margin:0 0 20pt 0;}h2{margin:15pt 0 3pt 0;}h3{margin:10pt 0 0pt 0;}h4{margin:10pt 0 0pt 0;}h5{margin:9pt 0 0pt 0;}h6{margin:9pt 0 0pt 0;}h1, h2, h3, h4, h5, h6{color:black;font-family:"Century Gothic", Verdana, "Sans";page-break-after:avoid;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:100%;}h2{border-bottom:1pt solid Silver;padding-bottom:2pt;}.h_tag{page-break-after:avoid;break-after:avoid;}abbr[title]{border-bottom:0;text-decoration:none;}a{color:black;margin:0;padding:0;vertical-align:baseline;text-decoration:none;font-style:italic;}a.autoheader_anchor{text-decoration:none;font-style:normal;page-break-after:avoid;break-after:avoid;}ul{list-style-type:square;}ul, ol{padding:0;margin:0;margin-top:10pt;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:13pt;margin-bottom:5pt;}ul > li{margin-left:25pt;}ol > li{margin-left:25pt;}li ul{margin-left:5pt;}li ul{margin-left:3pt;}li p{padding:1pt 0 0 0;margin:5pt 0 3pt 0;line-height:1.3;}p, ul, ol{line-height:1.3;padding:4pt 0 0 0;margin:0;color:black;}ul, ol{margin-top:0.75em;}pre{padding:3pt;margin:5pt 0;white-space:pre-wrap;background-color:#FAFAFA;border:1pt Silver solid;display:block;font-family:APLFont, monospace;page-break-inside:avoid;}pre code{background-color:#FAFAFA;color:Black;padding:0;margin:0 0 -6pt 0;line-height:1.1;border:0;white-space:pre-wrap;}code{font-family:APLFont, monospace;line-height:1.2;font-size:9pt;padding:3pt 1pt 3pt 1pt;color:#950000;padding:3pt 0pt 3pt 0pt;margin:0;}tbody th, tfoot tr{background-color:#e6e6e6;}tbody tr:nth-child(even){background-color:#fafafa;}th{background-color:#F0F0F0;}th, td{padding:1pt 5pt;border:1px solid #E3E3E3;vertical-align:top;}table td + td{border-left:1px solid gray;}table th + th{border-left:1px solid gray;}table code{font-style:normal;padding-left:0;padding-right:0;}table{margin:1.5em 0;font-family:APLFont;font-size:9pt;padding:0;border:1pt solid silver;border-collapse:collapse;}li > table{margin:10pt 0 10pt 0;}tr{margin:20pt;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:5pt solid silver;padding-left:5pt;margin:8pt 3pt 8pt 8pt;}nav{background-color:#f8f8f8;border:1pt solid Gray;width:auto;float:right;padding:5pt 5pt 5pt 0;margin:5pt 0 5pt 5pt;page-break-inside:avoid;break-inside:avoid;clear:both;overflow:hidden;}nav *{font-size:75%;}nav ul{list-style-type:none;margin:0 0 2pt 0;padding:0;}nav ul li{margin-bottom:0;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:9pt;line-height:1;padding:0;margin-top:0;margin-bottom:0;margin-left:8pt;}dl{margin-top:0;margin-bottom:10pt;}dt{margin-top:10pt;margin-bottom:0;font-weight:800;page-break-inside:avoid;}dd{margin-top:2pt;}label#hide_toc_label{font-size:65%;}.toc-container{position:relative;height:auto;margin-top:2pt;background-color:inherit;}.toc-container h3{margin:0 0 2pt 7pt;}[type="checkbox"]{display:none;}label{display:block;width:100%;height:1.1em;top:0;padding-left:10pt;}label:before{content:'Table of contents';font-weight:bold;font-size:140%;padding-bottom:10pt;}a.external_link::before{content:" 🌎";}a.bookmark_link::before{content:" ➯";}a.mailto_link::before{content:" ✉"}nav a.bookmark_link{font-style:normal;}nav p{margin-left:10pt;font-weight:bold;font-size:9pt;}nav a{font-style:normal;}nav a.bookmark_link::before{content:"";}div#footnotes_div a::before{content:"";}div#footnotes_div a{font-style:normal;}div#footnotes_div{page-break-inside:avoid;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("https://misc.aplteam.com/apl385.ttf") format("truetype");}.no_print{display:none;}.red{color:red;}.center{text-align:center;margin:0 auto;}.left{text-align:left;margin-right:0 auto;}.right{text-align:right;margin-left:0 auto;}.avoid_page_break{page-break-inside:avoid;}.page_break_before{page-break-before:always;}div.leanpub{margin:10pt 0 10pt 8pt;page-break-inside:avoid;}div.leanpub_A{border:1pt solid black;background-color:#f9f9f9;padding:5pt;margin:10pt 0 10pt 0;page-break-inside:avoid;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:3pt 0 0 0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:3pt 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 10pt 2pt 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub > div > h1:first-child{padding-top:5pt;}div.leanpub img{float:left;padding:0;margin:5pt 10pt 0 0;clear:both;}div.leanpub p{padding:3pt 0 0 0;margin:0;}span.leanpub_code{font-weight:bold;}div.leanpub p{display:block;padding:8pt 0 0 0;}div.leanpub > div{margin-left:35pt;}sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;top:-0.4em;}
</style>

</head>
<body>
<nav id="main_nav">
<input type="checkbox" id="hide_toc">
<label id="hide_toc_label" for="hide_toc"></label>
<div class="toc-container">
<ul>
<li><a href="#User-Commands">1. User Commands</a></li>
<li><a href="#The-API">2. The API</a>
<ul>
<li><a href="#BuildPackage">2.1. BuildPackage</a></li>
<li><a href="#CheckForLaterVersion">2.2. CheckForLaterVersion</a></li>
<li><a href="#ClearCache">2.3. ClearCache</a></li>
<li><a href="#CreateReInstallParms">2.4. CreateReInstallParms</a></li>
<li><a href="#DeletePackage">2.5. DeletePackage</a></li>
<li><a href="#DeprecatePackage">2.6. DeprecatePackage</a></li>
<li><a href="#FindDependencies">2.7. FindDependencies</a></li>
<li><a href="#GetDeletePolicy">2.8. GetDeletePolicy</a></li>
<li><a href="#GetDependencyTree">2.9. GetDependencyTree</a></li>
<li><a href="#GetLicenses">2.10. GetLicenses</a></li>
<li><a href="#GetNoCachingFlag">2.11. GetNoCachingFlag</a></li>
<li><a href="#GetPathToPackageCache">2.12. GetPathToPackageCache</a></li>
<li><a href="#GetUserHomeFolder">2.13. GetUserHomeFolder</a></li>
<li><a href="#InitialisePackage">2.14. InitialisePackage</a></li>
<li><a href="#InitPackageConfig">2.15. InitPackageConfig</a></li>
<li><a href="#InstallPackages">2.16. InstallPackages</a></li>
<li><a href="#ListDeprecated">2.17. ListDeprecated</a></li>
<li><a href="#ListCache">2.18. ListCache</a></li>
<li><a href="#ListPackages">2.19. ListPackages</a></li>
<li><a href="#ListRegistries">2.20. ListRegistries</a></li>
<li><a href="#ListTags">2.21. ListTags</a></li>
<li><a href="#ListVersions">2.22. ListVersions</a></li>
<li><a href="#LoadDependencies">2.23. LoadDependencies</a></li>
<li><a href="#LoadPackages">2.24. LoadPackages</a></li>
<li><a href="#Ping">2.25. Ping</a></li>
<li><a href="#PublishPackage">2.26. PublishPackage</a></li>
<li><a href="#ReInstallDependencies">2.27. ReInstallDependencies</a></li>
<li><a href="#ReadPackageConfigFile">2.28. ReadPackageConfigFile</a></li>
<li><a href="#UnInstallPackages">2.29. UnInstallPackages</a></li>
<li><a href="#Version">2.30. Version</a>
</li></ul></li>
</ul>
</div>
</nav>
<div class="h_tag">
<a href="#Tatin-Syntax-Reference" id="Tatin-Syntax-Reference" class="autoheader_anchor">
<h1 data-id="Tatin-Syntax-Reference">Tatin Syntax Reference</h1>
</a>
</div>
<div class="h_tag">
<a href="#User-Commands" id="User-Commands" class="autoheader_anchor">
<h2 data-id="User-Commands">1. User Commands</h2>
</a>
</div>
<p>Every user command comes with at least two levels of help, and a few even with a third level:</p>
<ol start="1">
<li><code>-?</code> shows a brief description and the syntax</li>
<li><code>-??</code> shows a detailed description of the command and its arguments and options</li>
<li><code>-???</code> shows examples (only available for some commands)</li>
</ol>
<p>If the third level is available then <code>-??</code> shows this at the bottom:</p>
<pre><code>]{user-command} -??? ⍝ Enter this for examples</code></pre>
<div class="h_tag">
<a href="#The-API" id="The-API" class="autoheader_anchor">
<h2 data-id="The-API">2. The API</h2>
</a>
</div>
<p>The API is established in <code>⎕SE.Tatin</code>. These are almost exclusively dfns that call a function in <code>⎕SE._Tatin</code>.</p>
<p>While <code>⎕SE._Tatin</code> holds all code required for the Tatin client, <code>⎕SE.Tatin</code> holds the public interface. A user is supposed to call functions in <code>Tatin</code> but not <code>_Tatin</code>.</p>
<p>The API funcion are listed alphabetically.</p>
<div class="h_tag">
<a href="#BuildPackage" id="BuildPackage" class="autoheader_anchor">
<h3 data-id="BuildPackage">2.1. BuildPackage</h3>
</a>
</div>
<pre><code>zipFilename←{dependencies} BuildPackage projectPath targetPath version</code></pre>
<p>ZIPs all files that are required for a package and/or defined in the <code>apl-package.json</code> file and (optionally) a dependency file from a given folder and creates a ZIP file containing these files in the (optional) <code>targetPath</code>.</p>
<dl>
<dt>projectPath:</dt>
<dd><p>A folder to create the package from: a package project</p></dd>
<dt>targetPath:</dt>
<dd><p class="first_dd">The folder the ZIP file is created in</p></dd>
<dd><p>Note that if <code>targetPath</code> is empty then it defaults to <code>projectPath</code></p></dd>
<dt>version:</dt>
<dd><p>Either empty or a replacement string for “version” or a rule how to modify the version number</p></dd>
</dl>
<div class="h_tag">
<a href="#The-version-number" id="The-version-number" class="autoheader_anchor">
<h4 data-id="The-version-number">2.1.1. The version number</h4>
</a>
</div>
<div class="h_tag">
<a href="#version-starts-with-a" id="version-starts-with-a" class="autoheader_anchor">
<h5 data-id="version-starts-with-a">2.1.1.1. “version” starts with a “+”</h5>
</a>
</div>
<p>It's treated as a rule. For that it must come with three digits separated by dots. The digits may be just 0 or 1.</p>
<p>The rules:</p>
<ul>
<li><code>+0.0.1</code> bumps the patch number</li>
<li><code>+0.1.0</code> bumps the minor number and resets the patch number</li>
<li><code>+1.0.0</code> bumps the major number and resets both the patch number and the minor number</li>
</ul>
<div class="h_tag">
<a href="#version-does-not-start-with-a" id="version-does-not-start-with-a" class="autoheader_anchor">
<h5 data-id="version-does-not-start-with-a">2.1.1.2. “version” does not start with a “+”</h5>
</a>
</div>
<ul>
<li>If <code>version</code> is empty then just the build number is bumped</li>
<li>If <code>version</code> is not empty but does not carry a build number then it replaces the version information but the build number, which is bumped</li>
<li>If <code>version</code> is not empty and carries a build number then it replaces the version information including the build number, and that build number is still bumped</li>
</ul>
<div class="h_tag">
<a href="#Dependencies" id="Dependencies" class="autoheader_anchor">
<h4 data-id="Dependencies">2.1.2. Dependencies</h4>
</a>
</div>
<p>Called without an (optional) left argument <code>BuildPackage</code> tries to establish whether the package depends on other packages:</p>
<ol start="1">
<li>It checks whether the package is managed by Cider (read: has a file <code>cider.config</code>). If that is the case it checks the property <code>[CIDER]tatinFolder</code> in that file. If that defines a folder that is not assigned to a subnamespace of the package then it is taken.
<p>Refer to the Cider documentation on <code>tatinFolder</code> for details.</p></li>
<li>If the package is not managed by Cider then Tatin assumes that package dependencies (if any) would be installed into a subfolder packages/.</li>
<li>If there is no subfolder packages/, or if it does not host a file <code>apl-dependencies.txt</code> then Tatin looks for a file <code>apl-dependencies.txt</code> in the root of the package project.</li>
<li>If the package is not managed by Cider and depends on packages that are installed in a different subfolder than packages/, then the name of the subfolder must be passed as left argument to <code>BuildPackage</code>.</li>
</ol>
<p>If no file <code>apl-dependencies.txt</code> can be detected then Tatin assumes that the package does not depend on other packages.</p>
<div class="h_tag">
<a href="#CheckForLaterVersion" id="CheckForLaterVersion" class="autoheader_anchor">
<h3 data-id="CheckForLaterVersion">2.2. CheckForLaterVersion</h3>
</a>
</div>
<pre><code> r←{flags} CheckForLaterVersion path</code></pre>
<p>Checks whether there are later versions available for the principal packages installed in <code>path</code>.</p>
<p>The optional left argument must, if specified, be an integer that may carry flags as a single integer:</p>
<table>
<thead>
<tr>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">0</td>
<td>No flag set, same as no argument at all</td>
</tr>
<tr>
<td style="text-align: right;">1</td>
<td>Major: should rather later major versions be listed? Defaults to 0</td>
</tr>
<tr>
<td style="text-align: right;">2</td>
<td>Dependencies: should dependencies be checked as well? Defaults to 0</td>
</tr>
<tr>
<td style="text-align: right;">3</td>
<td>Both flags set</td>
</tr>
</tbody>
</table>
<p>By default, only minor and patch number are part of the check. By specifying 1 as <code>major</code> you may change this default behaviour and list any later major versions instead.</p>
<p>Note that this function scans all known registries with a priority greater than zero.</p>
<p>Returns a matrix with five columns:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Col  </th>
<th style="text-align: left;"> Info</th>
</tr>
</thead>
<tbody>
<tr>
<td>[;1]</td>
<td>Original package ID</td>
</tr>
<tr>
<td>[;2]</td>
<td>Latest package ID</td>
</tr>
<tr>
<td>[;3]</td>
<td>Original URL</td>
</tr>
<tr>
<td>[;4]</td>
<td>Flag; 1 means later version is available</td>
</tr>
<tr>
<td>[;5]</td>
<td>URL the latest version was found but empty in case it's identical with [;3]</td>
</tr>
</tbody>
</table>
<div class="h_tag">
<a href="#ClearCache" id="ClearCache" class="autoheader_anchor">
<h3 data-id="ClearCache">2.3. ClearCache</h3>
</a>
</div>
<pre><code>(rc report)←ClearCache dummy</code></pre>
<p>Clears the cache, meaning that all subdirectories but <code>temp\</code> are removed from the folder <code>GetPathToPackageCache</code> points to.</p>
<div class="h_tag">
<a href="#CreateReInstallParms" id="CreateReInstallParms" class="autoheader_anchor">
<h3 data-id="CreateReInstallParms">2.4. CreateReInstallParms</h3>
</a>
</div>
<pre><code>r←CreateReInstallParms</code></pre>
<p>Creates a namespace with default parameters; it can be passed as (optional) left argument to the <a href="#ReInstallDependencies" class="bookmark_link"><code>ReInstallDependencies</code></a> function, in particular, <code>noBetas</code>, <code>update</code> and <code>dry</code>.</p>
<div class="h_tag">
<a href="#DeletePackage" id="DeletePackage" class="autoheader_anchor">
<h3 data-id="DeletePackage">2.5. DeletePackage</h3>
</a>
</div>
<pre><code>(statusCode errMsg)←DeletePackage uri</code></pre>
<p>Deletes a package.</p>
<p>Whether deleting a package from a Tatin Registry is possible at all depends on the delete policy it operates, which is in turn determined by the INI setting <code>[CONFIG]DeletePackages</code>. See <a href="#GetDeletePolicy" class="bookmark_link"><code>GetDeletePolicy</code></a>.</p>
<div class="h_tag">
<a href="#DeprecatePackage" id="DeprecatePackage" class="autoheader_anchor">
<h3 data-id="DeprecatePackage">2.6. DeprecatePackage</h3>
</a>
</div>
<pre><code>msg←DeprecatePackage y</code></pre>
<p>Declares a package to be deprecated.</p>
<p><code>y</code> must provide three pieces of information:</p>
<ul>
<li>A Registry URL or a Registry alias</li>
<li>A comment like “See package xyz instead”</li>
<li>A package ID that provides group name, package name and optionally a major version number
<p>If no major version number is provided, then the function acts on <em>all</em> major versions of that package.</p></li>
</ul>
<p>Note that because the Registry must be defined no scanning takes place with this function.</p>
<div class="h_tag">
<a href="#FindDependencies" id="FindDependencies" class="autoheader_anchor">
<h3 data-id="FindDependencies">2.7. FindDependencies</h3>
</a>
</div>
<pre><code>r←{level} FindDependencies (folder pkgList)
</code></pre>
<p>Scans <code>folder</code> recursively for the file “apl-dependencies.txt”. Folders with such a file will be scanned for packages defined in <code>pkgList</code>. Useful for finding out where one or more packages are used.</p>
<p><code>pkgList</code> must be a simple char vector with a list of comma-separated packages.</p>
<p>The packages can be specified fully or partly. “Group” and “version” can be left out, while “Name” is mandatory. You may specify a major version but neither “Minor” nor “Patch”. If you do anyway anything after the major number will be ignored.</p>
<p>Note that the search is <em>not</em> case-sensitive.</p>
<p>Returns a fully qualified list with all hits.</p>
<p>By default just the folder is returned that contains the file “apl-dependencies.txt”. In case a 1 is passed as left argument (default is 0, other values led to an error) the actual package folders are returned, revealing the precise version(s) installed.</p>
<div class="h_tag">
<a href="#GetDeletePolicy" id="GetDeletePolicy" class="autoheader_anchor">
<h3 data-id="GetDeletePolicy">2.8. GetDeletePolicy</h3>
</a>
</div>
<pre><code>r←GetDeletePolicy uri</code></pre>
<p>Takes a URI of a server like https://tatin.dev or an alias and returns the delete policy operated by that server.</p>
<p>Returns one of “None”, “Any”, “JustBetas”:</p>
<ul>
<li>“None” means a package, once published, cannot be deleted</li>
<li>“Any” means any package can be deleted</li>
<li>“JustBetas” means that only beta versions can be deleted</li>
</ul>
<div class="h_tag">
<a href="#GetDependencyTree" id="GetDependencyTree" class="autoheader_anchor">
<h3 data-id="GetDependencyTree">2.9. GetDependencyTree</h3>
</a>
</div>
<pre><code>tree←GetDependencyTree x</code></pre>
<p>Takes <code>identifier</code> (<code>x</code>) and returns the dependencies as a matrix.</p>
<p><code>identifier</code> must be one of:</p>
<ul>
<li>an HTTP request</li>
<li>a folder holding a package (like file://C:\Temp{group}-{name}-{major.minor.patch}\)</li>
<li>a path to a package in a registry (like C:\MyReg\{packageID})</li>
<li>a package ID; Tatin will then attempt to find that package in the Registries defined in the Client's config file.</li>
</ul>
<p>Returns a dependency tree as a matrix:</p>
<table>
<tbody>
<tr>
<td>[;1]</td>
<td>Flag that indicates whether it is a principal package (1) or a dependency (0)</td>
</tr>
<tr>
<td>[;2]</td>
<td>PackageID of what required that dependency</td>
</tr>
<tr>
<td>[;3]</td>
<td>Full package ID</td>
</tr>
<tr>
<td>[;4]</td>
<td>The full URL (either a local path (without protocol) or http(s)://…)</td>
</tr>
</tbody>
</table>
<p>This function requires the version number to be fully specified.</p>
<p>Note that the function accepts an optional left argument, but this should not be specified by a user: it is only used internally.</p>
<div class="h_tag">
<a href="#GetLicenses" id="GetLicenses" class="autoheader_anchor">
<h3 data-id="GetLicenses">2.10. GetLicenses</h3>
</a>
</div>
<pre><code>r←{verbose} GetNoCachingFlag url</code></pre>
<p><code>verbose</code> defaults to 0 but might be 1.</p>
<ul>
<li>With <code>verbose←0</code> a list with the names of all licenses tolerated by the given managed Tatin Registry is returned. Might be empty.</li>
<li>With <code>verbose←1</code> a matrix with two columns and zero or more rows is returned:
<ul>
<li><code>[;1]</code> Names of all licenses</li>
<li><code>[;2]</code> URLs of all licenses</li>
</ul></li>
</ul>
<div class="h_tag">
<a href="#GetNoCachingFlag" id="GetNoCachingFlag" class="autoheader_anchor">
<h3 data-id="GetNoCachingFlag">2.11. GetNoCachingFlag</h3>
</a>
</div>
<pre><code>flag←GetNoCachingFlag uri</code></pre>
<p>Takes a URI or an alias and tries to find that URI in the <code>MyUserSettings</code> instance. If found the value of the <code>noCaching</code> property is returned.</p>
<p>If URI is not found a 0 is returned.</p>
<div class="h_tag">
<a href="#GetPathToPackageCache" id="GetPathToPackageCache" class="autoheader_anchor">
<h3 data-id="GetPathToPackageCache">2.12. GetPathToPackageCache</h3>
</a>
</div>
<pre><code>r←GetPathToPackageCache</code></pre>
<p>The user settings rule:</p>
<ul>
<li>If <code>MyUserSettings.path2cache</code> is not empty then that path is returned, otherwise:</li>
<li>The function returns the standard path for caching which depends on the operating system</li>
</ul>
<div class="h_tag">
<a href="#GetUserHomeFolder" id="GetUserHomeFolder" class="autoheader_anchor">
<h3 data-id="GetUserHomeFolder">2.13. GetUserHomeFolder</h3>
</a>
</div>
<pre><code>path←{aplVersion} GetUserHomeFolder append</code></pre>
<p>Returns the standard path for any user-specific data.</p>
<p>Works on all platforms but returns different results.</p>
<p><code>⍵</code>, if not empty, is added to the resulting path.</p>
<p>Under Windows typically:</p>
<pre><code>`C:\Users\%USERPROFILE%\AppData\Roaming\Tatin'     ←→ GetUserHomeFolder ''
`C:\Users\%USERPROFILE%\AppData\Roaming\Tatin\foo' ←→ GetUserHomeFolder 'foo'</code></pre>
<p>On non-Windows platforms:</p>
<pre><code>'/home/{⎕AN}/Tatin'     ←→ GetUserHomeFolder ''
'/home/{⎕AN}/Tatin/foo' ←→ GetUserHomeFolder 'foo'</code></pre>
<p><code>⍺</code> is optional and only specified by test cases in order to simulate different versions of APL.</p>
<div class="h_tag">
<a href="#InitialisePackage" id="InitialisePackage" class="autoheader_anchor">
<h3 data-id="InitialisePackage">2.14. InitialisePackage</h3>
</a>
</div>
<pre><code>config←{configParms} InitialisePackage folder</code></pre>
<p>Takes a folder (<code>⍵</code>) and initializes it so that it can be a package.</p>
<p>This means in particular to create the folder (although it might already exist) and creating a package config file with default settings or what <code>⍺</code> specifies: one can pass a config namespace as <code>⍺</code>, typically created by a call to <a href="#InitPackageConfig" class="bookmark_link"><code>InitPackageConfig</code></a>.</p>
<p>There must be no config file yet, otherwise an error is thrown.</p>
<div class="h_tag">
<a href="#InitPackageConfig" id="InitPackageConfig" class="autoheader_anchor">
<h3 data-id="InitPackageConfig">2.15. InitPackageConfig</h3>
</a>
</div>
<pre><code>cfg←InitPackageConfig y</code></pre>
<p>Returns a namespace with default values useful for the function <a href="#InitialisePackage" class="bookmark_link"><code>InitialisePackage</code></a>.</p>
<p><code>⍵</code> might be empty; then it is ignored. Alternatively, it might be a namespace with variables. If it is then the variables in that namespace overwrite the defaults.</p>
<div class="h_tag">
<a href="#InstallPackages" id="InstallPackages" class="autoheader_anchor">
<h3 data-id="InstallPackages">2.16. InstallPackages</h3>
</a>
</div>
<pre><code>r←{noBetas} InstallPackages (identifiers targetFolder)</code></pre>
<p>Installs one or more packages (<code>identifiers</code> ) in <code>targetFolder</code>.</p>
<p><code>identifiers</code> must be a simple character vector, specifying one or more comma-separated packages (items).</p>
<p>Each item must be one of:</p>
<ul>
<li>an HTTP request for a package</li>
<li>a ZIP file holding a package</li>
<li>a folder holding a package (like file://C:\Temp\group-name-version\)</li>
<li>a path to a package in a registry (like [RegistryAlias]{group}-{name}-{major.minor.patch} or C:\MyReg\{group}-{name}-{major.minor.patch})</li>
<li>a package ID; Tatin will then attempt to find that package in the Registries defined in the Client's config file.</li>
<li>The internal alias <code>[MyUCMDs]</code> (case independent); this will then be replaced by the actual path to the MyUCMDs/ folder while the name of the sub-folder is derived from the package ID.
<p>Note that in this case you..</p>
<ul>
<li><strong>must not</strong> specify anything after <code>[MyUCMDs]</code></li>
<li>can only install a single package at the time</li>
</ul></li>
</ul>
<p>You may omit minor+patch or even major+minor+patch in order to install the latest version.</p>
<p>By default beta versions are considered in case the package ID is incomplete, but you can suppress them by passing 0 as <code>⍺</code>.</p>
<p><code>r</code> is a nested vector of character vectors with the full names of all principal packages installed. The length will match the number of packages specified as <code>identifiers</code>.</p>
<p>Notes:</p>
<ul>
<li>The target folder will be created if it does not already exist</li>
<li>The package ID(s) might use any case, meaning that if the package's name is <code>foo-Goo-1.2.3</code> then you might as well spell it <code>foo-GOO-1.2.3</code> or <code>FOO-goo-1.2.3</code>: it would not make a difference</li>
</ul>
<div class="h_tag">
<a href="#ListDeprecated" id="ListDeprecated" class="autoheader_anchor">
<h3 data-id="ListDeprecated">2.17. ListDeprecated</h3>
</a>
</div>
<pre><code>r←ListDeprecated uri</code></pre>
<p>Lists all packages that are deprecated but only if they are the last published version of any given major version number.</p>
<p>This default behaviour can be changed with the <code>-all</code> flag: then all versions of any major version that is marked as deprecated are listed.</p>
<p><code>uri</code> must be one of:</p>
<ul>
<li>A path to an install folder, defined by the presence of a file <code>apl-buildlist.json</code></li>
<li>A path to a Registry and optionally a (possibly incomplete) package ID</li>
</ul>
<div class="h_tag">
<a href="#ListCache" id="ListCache" class="autoheader_anchor">
<h3 data-id="ListCache">2.18. ListCache</h3>
</a>
</div>
<pre><code>r←{fullpath} Listcache uri</code></pre>
<p>Lists the contents of the Tatin package cache. Refers to the <code>MyUserSettings</code> instance of the class <code>UserSettings</code>.</p>
<p><code>uri</code> might be empty or a specific domain:</p>
<ul>
<li>In case it is empty all packages of all domains are listed</li>
<li>In case it is a specific domain only packages of that domain are listed</li>
</ul>
<p>The optional left argument <code>fullpath</code> defaults to 0, when just domain names and package IDs are reported. If it is 1 then the full paths are reported instead.</p>
<p>The result is a vector with as many items as there are domains represented in the cache with at least one package. Each item is a two-element vector:</p>
<ul>
<li>The first item holds the url of the domain</li>
<li>The second item holds a vector of char vectors with the package names</li>
</ul>
<p>In case the cache is empty an empty vector is returned.</p>
<div class="h_tag">
<a href="#ListPackages" id="ListPackages" class="autoheader_anchor">
<h3 data-id="ListPackages">2.19. ListPackages</h3>
</a>
</div>
<pre><code>mat←{parms} ListPackages uri</code></pre>
<p>Lists all packages of a given Registry except when the last package of a major version number is marked as deprecated — see <code>ListDepreciated</code> for details.</p>
<p><code>uri</code> must be one of:</p>
<ul>
<li>A path to an install folder, defined by the presence of a file <code>apl-buildlist.json</code></li>
<li>A path to a Registry and optionally a (possibly incomplete) package ID</li>
</ul>
<div class="h_tag">
<a href="#Right-argument" id="Right-argument" class="autoheader_anchor">
<h4 data-id="Right-argument">2.19.1. Right argument</h4>
</a>
</div>
<div class="h_tag">
<a href="#Install-folder" id="Install-folder" class="autoheader_anchor">
<h5 data-id="Install-folder">2.19.1.1. Install folder</h5>
</a>
</div>
<p>In case an install folder was specified a two-column matrix is returned:</p>
<table>
<tbody>
<tr>
<td>[;1]</td>
<td>Carries the package ID</td>
</tr>
<tr>
<td>[;2]</td>
<td>Carries a star for principal packages</td>
</tr>
</tbody>
</table>
<div class="h_tag">
<a href="#Registry" id="Registry" class="autoheader_anchor">
<h5 data-id="Registry">2.19.1.2. Registry</h5>
</a>
</div>
<p>In case a Registry was specified by default all packages saved in that Registry are returned, aggregated by major versions, as a two-column matrix.</p>
<p>You may specify an incomplete package ID; then only matching packages are listed.</p>
<p>You may even specify just a package name, without a group name. That would not make a difference in case the name is only used once, but if it is used in several groups then all of them will be listed.</p>
<div class="h_tag">
<a href="#uri" id="uri" class="autoheader_anchor">
<h5 data-id="uri">2.19.1.3. uri</h5>
</a>
</div>
<ul>
<li><code>uri</code> is empty and <code>aggregate</code> is 1 (the default):
<p>All packages are returned with the number of major versions in <code>[;2]</code></p></li>
<li><code>uri</code> is empty and <code>aggregate</code> is 0:
<p>All packages are returned; the second column carries <code>⍬</code></p></li>
<li><code>uri</code> specifies {name} and <code>aggregate</code> is 0:
<p>All packages that match <code>name</code> are returned; they might belong to different groups</p></li>
<li><code>uri</code> specifies {group}-{name} and <code>aggregate</code> is 0:
<p>All versions of that package are returned</p></li>
<li><code>uri</code> specifies {group}-{name} and <code>aggregate</code> is 1:
<p>All major versions of that package are returned</p>
<p><code>[;2]</code> carries the number of versions of each major version</p></li>
<li><code>uri</code> specifies {group}-{name}-{major}; in this case <code>aggregate</code> is ignored:
<p>All versions (minor and patch) of that package are returned</p></li>
<li><code>uri</code> specifies {group}-{name}-{major}-{minor}; in this case <code>aggregate</code> is ignored:
<p>All patch versions of that package are returned</p></li>
</ul>
<div class="h_tag">
<a href="#Left-argument" id="Left-argument" class="autoheader_anchor">
<h4 data-id="Left-argument">2.19.2. Left argument</h4>
</a>
</div>
<p>Optionally <code>parms</code> can be specified. If specified this must be a namespace that must contain the variables <code>group</code>, <code>tags</code> and <code>aggregate</code>. It may contain <code>date</code>, <code>since</code>, <code>project_url</code> and/or <code>userCommand</code>.</p>
<p>The following parameters allow the user to select certain packages:</p>
<ul>
<li>Use <code>group</code> to specify the group.</li>
<li>Use <code>tags</code> to specify one or more tags (simple comma-separated text vector); is case-independent.</li>
<li><code>userCommand</code>, if specified, must be a Boolean. If it is 1 only packages that are user commands are returned.</li>
<li>Use <code>since</code> to specify a date; all packages published before that date will be ignored.
<p><code>since</code> can be one of:</p>
<ul>
<li>A character vector in the format <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> like <code>since←'2022-06-01'</code></li>
<li>An integer in the format <code>YYYYMMDD</code> like like <code>since←20220601</code></li>
</ul></li>
</ul>
<p>The following parameters allow the user to influence what data is returned:</p>
<ul>
<li>If <code>date</code> is <code>1</code> an additional column is added to the result with the publishing date</li>
<li>If <code>project_url</code> is <code>1</code> an additional column is added to the result with the <code>project_url</code>, if any</li>
<li>If <code>aggregate</code> is <code>0</code> the data is not aggregated by minor and patch number; defaults to 1.</li>
</ul>
<div class="h_tag">
<a href="#Result" id="Result" class="autoheader_anchor">
<h4 data-id="Result">2.19.3. Result</h4>
</a>
</div>
<p>Returns a matrix with at least two and up to four columns. These columns are always returned:</p>
<table>
<tbody>
<tr>
<td>[;1]</td>
<td>Package name</td>
</tr>
<tr>
<td>[;2]</td>
<td>Carries the number of major versions</td>
</tr>
</tbody>
</table>
<p>In case <code>date</code> was specified, the result has one more column carrying the publishing date.</p>
<div class="h_tag">
<a href="#Deprecated-packages" id="Deprecated-packages" class="autoheader_anchor">
<h4 data-id="Deprecated-packages">2.19.4. Deprecated packages</h4>
</a>
</div>
<p>In case the last published version of a package carries a flag <code>deprecated</code> in its config file and that is a 1, such a package and all its predecessors with the same major version number <em>are not listed</em>.</p>
<p>To list just deprecated packages use <code>ListDepreciated</code>.</p>
<div class="h_tag">
<a href="#ListRegistries" id="ListRegistries" class="autoheader_anchor">
<h3 data-id="ListRegistries">2.20. ListRegistries</h3>
</a>
</div>
<pre><code>r←ListRegistries type</code></pre>
<p>Lists all registries defined in the Client's config file.</p>
<p>Returns a matrix with these columns:</p>
<table>
<tbody>
<tr>
<td>[;1]</td>
<td>Alias</td>
</tr>
<tr>
<td>[;2]</td>
<td>URL</td>
</tr>
<tr>
<td>[;3]</td>
<td>Port</td>
</tr>
<tr>
<td>[;4]</td>
<td>Priority</td>
</tr>
<tr>
<td>[;5]</td>
<td>No-caching flag</td>
</tr>
<tr>
<td>[;6]</td>
<td>API key</td>
</tr>
</tbody>
</table>
<p>“type” must be either 0 or 1 or empty:</p>
<ul>
<li>1 means all data is listed</li>
<li>0 means the API key is not listed</li>
</ul>
<p>Notes:</p>
<ul>
<li>The result of the API function and the user command differ</li>
<li>When a Tatin Server is questioned by <code>ListRegistries</code> but does not respond an error is thrown.</li>
</ul>
<div class="h_tag">
<a href="#ListTags" id="ListTags" class="autoheader_anchor">
<h3 data-id="ListTags">2.21. ListTags</h3>
</a>
</div>
<pre><code>list←{parms} ListTags y</code></pre>
<p>Lists all tags.</p>
<p><code>y</code> might be the URL of a Tatin server or a Registry alias (embraced by <code>[]</code>).</p>
<p>By default all tags of all packages are returned as a two-column matrix:</p>
<ul>
<li><code>[;1]</code> carries the name of the tags</li>
<li><code>[;2]</code> carries the number of occurrences of that tag</li>
</ul>
<p>Optionally <code>⍺</code> can be specified. Must be a namespace that might contain a variable <code>tags</code> which may specify one or more tags (simple comma-separated text vector). If that is the case only the tags shared by the packages that carry all of the specified tags will be returned.</p>
<div class="h_tag">
<a href="#ListVersions" id="ListVersions" class="autoheader_anchor">
<h3 data-id="ListVersions">2.22. ListVersions</h3>
</a>
</div>
<pre><code>mat←{dateFlag} ListVersions url</code></pre>
<p>Lists all versions of a given package.</p>
<p><code>url</code> is one of:</p>
<ul>
<li>A package name</li>
<li>A group name and a package name</li>
<li>A URL pointing to a Registry together with a package name</li>
<li>An alias pointing to a Registry together with a package name</li>
<li>A (local) path to a Registry together with a package name</li>
</ul>
<p>A package name may be either just the name or group and name. Additionally, you may either specify a major version number, or a major and a minor version number.</p>
<p>Specifying a patch number makes no sense. If it is specified anyway it is ignored.</p>
<p>Therefore the following arguments are all valid:</p>
<ol start="1">
<li><code>example-versions</code></li>
<li><code>example-versions-1</code></li>
<li><code>example-versions-1.0</code></li>
<li><code>[tatin-test]versions</code></li>
<li><code>[tatin-test]example-versions</code></li>
<li><code>[tatin-test]example-versions-1</code></li>
<li><code>[tatin-test]example-versions-1.0</code></li>
<li><code>[tatin-test]example-versions-1.0.1 ⍝ Same as 7.</code></li>
</ol>
<p>In the first three cases all defined Registries with a priority greater than zero are scanned. A matrix with two columns is returned: URL and full package ID.</p>
<p>If a URL or an alias was specified the given Registry is questioned. A matrix with one column with full package IDs is returned.</p>
<p>You may omit the group name; that does not make a difference when the name is used only within one group anyway, but if it is used in more than one group, then all of them are listed.</p>
<p>If version precedence cannot be established from the version numbers alone (often a problem with beta versions) then the publishing date is taken into account.</p>
<p>By default, the publishing date is not included, but you may change this by passing a 1 as <code>⍺</code>. In that case, an additional column is added to the result.</p>
<p>Note that the package ID might use any case, meaning that if the package's name is <code>foo-Goo</code> then you might as well spell it <code>foo-GOO</code> or <code>FOO-goo</code>: it would not make a difference</p>
<div class="h_tag">
<a href="#LoadDependencies" id="LoadDependencies" class="autoheader_anchor">
<h3 data-id="LoadDependencies">2.23. LoadDependencies</h3>
</a>
</div>
<pre><code>{r}←LoadDependencies y</code></pre>
<p>Loads all packages according to a build list in a folder.</p>
<p>Requires two mandatory arguments:</p>
<ul>
<li>A folder with a build list</li>
<li>A target namespace</li>
</ul>
<p>You may specify an optional third argument: the <code>overwriteFlag</code> flag which defaults to 0.</p>
<p>Use <code>overwriteFlag</code> in case all packages should be loaded even if they already exist in <code>(#|⎕SE)._tatin</code></p>
<p>Loads all packages and injects required references into <code>targetSpace</code>.</p>
<p>Returns a vector with references to the loaded packages (principal packages only, so no dependencies).</p>
<div class="h_tag">
<a href="#MyUCMDs" id="MyUCMDs" class="autoheader_anchor">
<h4 data-id="MyUCMDs">2.23.1. MyUCMDs/</h4>
</a>
</div>
<p>In case a Tatin package is a Dyalog user command it can be installed in the special folder MyUCMDs/. Now where this folder lives depends on the operating system used.</p>
<p>However, if you want to load a user command “foo” from that folder you can do this:</p>
<pre><code>⎕SE.Tatin.LoadDependencies '[MyUCMDs]foo` ⎕SE</code></pre>
<p>Note that <code>MyUCMDs</code> is case independent, so specifying <code>MYUCMDS</code> or <code>myucmds</code> will do as well.</p>
<div class="h_tag">
<a href="#LoadPackages" id="LoadPackages" class="autoheader_anchor">
<h3 data-id="LoadPackages">2.24. LoadPackages</h3>
</a>
</div>
<pre><code>r←{noBetas} LoadPackages (identifiers targetSpace)</code></pre>
<p>Loads packages dynamically into the workspace.</p>
<p><code>identifiers</code> must be a simple character vector specifying one or more comma-separated packages (items).</p>
<p>Every single item must be one of:</p>
<ul>
<li>An HTTP request for a package</li>
<li>A ZIP file holding a package</li>
<li>A folder holding a package (like file://C:/Temp/group-name-version)</li>
<li>A path to a package in a registry (like [RegistryAlias]{packageID} or C:\MyReg{packageID}')</li>
<li>A package ID; Tatin will then attempt to find that package in one of the Registries defined in the client's config file with a priority greater than 0.
<p>The first hit wins.</p></li>
</ul>
<p><code>targetSpace</code> must be a reference or a fully qualified name of an ordinary namespace, meaning the name must start with either <code>#</code> or <code>⎕SE</code>.</p>
<p>It might already exist, but if it doesn't it will be created. If it exists but is not an ordinary namespace an error is thrown.</p>
<p>Loads the package(s) into <code>(#|⎕SE)._tatin.{packageName}</code> and establishes a reference for every one of them in <code>targetSpace</code></p>
<p>Loads all dependencies, if any, as well into <code>(#|⎕SE)._tatin</code> but does <em>not</em> create references for them in <code>targetSpace</code>.</p>
<p>By default beta versions are considered in case the package ID is incomplete, but you can suppress them by passing 1 as <code>⍺</code>.</p>
<p>Returns the number of packages installed, including dependencies.</p>
<p>Note that the package ID(s) might use any case, meaning that if the package's name is <code>foo-Goo-1.2.3</code> then you might as well spell it <code>foo-GOO-1.2.3</code> or <code>FOO-goo-1.2.3</code>: it would not make a difference</p>
<div class="h_tag">
<a href="#Ping" id="Ping" class="autoheader_anchor">
<h3 data-id="Ping">2.25. Ping</h3>
</a>
</div>
<pre><code>bool←Ping url</code></pre>
<p>Establishes whether the host is up and running with very little overhead. If <code>url</code> (can also be an alias) points to a folder a 1 is returned if that folder exists, otherwise 0.</p>
<div class="h_tag">
<a href="#PublishPackage" id="PublishPackage" class="autoheader_anchor">
<h3 data-id="PublishPackage">2.26. PublishPackage</h3>
</a>
</div>
<pre><code>{(statusCode errMsg zipFilename)}←{dependencies} PublishPackage (source registry)</code></pre>
<p>Publishes a package.</p>
<ol start="1">
<li>Checks whether there is already such a package but with a different spelling in terms of case</li>
<li>Creates a zip file for the package in a Temp folder if required</li>
<li>Moves the zip file into the Registry, either via HTTP or directly.</li>
<li>Updates the Registry index in case it's a local Registry</li>
</ol>
<p>Note that if <code>⍵</code> points already to a ZIP file only steps 3 and 4 are performed.</p>
<p><code>⍵</code> must be a two-item vector:</p>
<ol start="1">
<li><code>source</code> → folder to create the package from</li>
<li><code>registry</code> → registry to publish the package to (alias or url)</li>
</ol>
<p>In case a folder is specified rather than a ZIP file then <code>PublishPackage</code> tries to establish whether the package depends on other packages. This is done by the API function <code>BuildPackage</code>, which is called by <code>PublishPackage</code> internally.</p>
<p>The optional left argument <code>dependencies</code> is, when specified, passed as left argument to <code>BuildPackage</code>; see there for details.</p>
<p>The explicit result:</p>
<ul>
<li><code>statusCode</code> is an HTTP code no matter whether it is an HTTP call or not.</li>
<li><code>errMsg</code> is empty if <code>statusCode</code> is 200, otherwise it might carry additional information.</li>
<li><code>zipFilename</code> is empty in case <code>source</code> is a ZIP file, otherwise it is the name of the ZIP file created.</li>
</ul>
<div class="leanpub">
<img src="https://download.aplwiki.com/LeanPub/Images/warning.png" alt="Warning">
<div>
<p>Note that the API function will publish the package no matter what the delete policy operated by the server is.</p>
<p>That is different from the user command which will ask the user for confirmation in case the user attempts to publish a package that cannot be deleted once published.</p>
</div>
</div>

<div class="h_tag">
<a href="#ReInstallDependencies" id="ReInstallDependencies" class="autoheader_anchor">
<h3 data-id="ReInstallDependencies">2.27. ReInstallDependencies</h3>
</a>
</div>
<pre><code>{refs}←{parms} ReInstallDependencies (dependencies installFolder [Registry])</code></pre>
<p>Re-installs all files in a given file <code>apl-dependencies.txt</code>.</p>
<p>Takes a folder that hosts a file <code>apl-dependencies.txt</code> as mandatory argument.</p>
<p>The file apl-buildlist.json as well as all directories in that folder will be deleted. Then all packages listed in the file apl-dependencies.txt are re-installed from scratch.</p>
<p>Note that packages with different major version numbers are considered as different packages.</p>
<p>By default all known Registries with a priority greater than 0 are scanned (highest priority number first), but you may specify a particular Registry as a third (optional) argument.</p>
<p>The left argument is optional and is, if specified, typically created by calling <a href="#CreateReInstallParms" class="bookmark_link"><code>CreateReInstallParms</code></a>.</p>
<p>It may carry three parameters:</p>
<ul>
<li><code>noBetas</code>
<p>By default this is 0, meaning that beta versions are considered. Set this to 1 if you want betas to be ignored.</p></li>
<li><code>update</code>
<p>Defaults to 0, meaning that the same version is installed again even if a later version is available. Change this to 1 to force an update.</p></li>
<li><code>dry</code>
<p>Defaults to 0, meaning the function does business. Set this to 1 in order to get a report of what the function would do without actually doing it.</p></li>
</ul>
<p>Notes:</p>
<ul>
<li>For every dependency this function performs a Registry scan</li>
<li>Packages that were installed from ZIP files are just re-installed from their ZIP files without further ado.</li>
</ul>
<div class="leanpub_A">
<h3>Registry scans</h3>
<p>Under certain circumstances Tatin performs a Registry scan: Tatin questions every Registry with a priority greater than 0 (highest priority number first) for hosting a particular package. The first hit wins.</p>
<p>For example, when <code>ReInstallDependencies</code> is called for all dependencies a Registry scan is performed.</p>
<p>Note that when you installed a package from a Tatin Registry https://MyTatin.com and then later remove that Registry from your user settings, or set its priority to 0, effectively telling Tatin not to scan that Registry anymore, then <code>ReInstallDependencies</code> will <strong>not</strong> scan https://MyTatin.com anymore, despite Tatin knowing perfectly well where the package in question was originally loaded from.</p>
</div>

<div class="h_tag">
<a href="#ReadPackageConfigFile" id="ReadPackageConfigFile" class="autoheader_anchor">
<h3 data-id="ReadPackageConfigFile">2.28. ReadPackageConfigFile</h3>
</a>
</div>
<pre><code>cfg←ReadPackageConfigFile path</code></pre>
<p>Takes a path to a package and returns the config file for that package as a namespace populated with variables.</p>
<p><code>path</code> may or may not carry the filename (<code>apl-package.json</code>).</p>
<div class="h_tag">
<a href="#UnInstallPackages" id="UnInstallPackages" class="autoheader_anchor">
<h3 data-id="UnInstallPackages">2.29. UnInstallPackages</h3>
</a>
</div>
<pre><code>(list msg)←UnInstallPackage (packageID folder)</code></pre>
<p><code>UnInstallPackage</code> attempts to un-install the package <code>packageID</code> and all its dependencies, but the latter only in case they are neither principal packages nor required by other packages.</p>
<p><code>folder</code> must host a Tatin dependency file.</p>
<p><code>packageID</code> might be a full package ID but also &lt;group&gt;-&lt;name&gt; or just &lt;name&gt;. However, in case more than one package qualify an error is thrown.</p>
<p>Note that if <code>packageID</code> is empty a clean-up attempt is made.</p>
<p><code>folder</code> may be a subfolder of an open Cider project. Tatin works out the correct one; if there are multiple Cider projects open the user is questioned.</p>
<p><code>packageID</code> must be fully qualified: group + name + version.</p>
<p>If a package was installed with an alias you must un-install it by specifying the alias.</p>
<p>If a package is installed twice, once with an alias and once without, running <code>]UnInstallPackage</code> on either of them does not uninstall the package but removes just the reference to it. Only when the other one is uninstalled as well is the package actually removed.</p>
<p>To keep things simple Tatin performs the following steps:</p>
<ol start="1">
<li>Checks whether the package ID is mentioned in the dependency file. If not an error is thrown.</li>
<li>Removes <code>packagedID</code> from the dependency file.</li>
<li>Re-compile the build list based on the new dependency file.</li>
<li>Removes all packages that are not mentioned in the build list anymore.</li>
</ol>
<p>Returns a two-item vector:</p>
<ol start="1">
<li>List with the fully qualified names of all removed packages. Note that they might carry an alias.</li>
<li>Message, ideally empty.</li>
</ol>
<p>Note that removing the directories hosting the packages might fail for all sorts of reasons even though the package and any dependencies were already successfully removed from both the dependency file and the build list.</p>
<div class="h_tag">
<a href="#Version" id="Version" class="autoheader_anchor">
<h3 data-id="Version">2.30. Version</h3>
</a>
</div>
<pre><code>r←Version</code></pre>
<p>Returns “name”, “version” and “date”.</p>
</body>
</html>
